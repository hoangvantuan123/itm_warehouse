(function(){"use strict";function l(t,r,a){if(!t||!Array.isArray(r))return{success:!1,message:"Dữ liệu không hợp lệ hoặc barcode bị thiếu"};const s=t.split("/"),n=s[0],c=s[1],o=parseInt(s[2],10),m=s[3],u=s[4];console.log("code ",n,c,o,u);const e=r.find(i=>i.ItemNo===n);return a.find(i=>i.Barcode===t)?{success:!1,message:"Barcode đã được quét trước đó"}:e?{success:!0,message:`Barcode "${t}" khớp với ItemNo: ${e.ItemNo}, Số lượng quét: ${o}.`,data:{itemNo:e.ItemNo,qty:o,lot:c,dc:m,reel:u,barcode:t,UnitSeq:e.UnitSeq,ItemSeq:e.ItemSeq,OutWHName:e.OutWHName,OutWHSeq:e.OutWHSeq,InWHName:e.InWhName,InWHSeq:e.InWHSeq,FactUnitName:e.FactUnitName,FactUnit:e.FactUnit,WorkOrderSerl:e.WorkOrderSerl,WorkOrderSeq:e.WorkOrderSeq,OutReqItemSerl:e.OutReqItemSerl,OutReqSeq:e.OutReqSeq}}:{success:!1,message:`Không tìm thấy ItemNo: ${n} trong dữ liệu`}}self.onmessage=function(t){const{type:r,barcode:a,tableData:s,tableScanHistory:n}=t.data;let c;switch(r){case"CHECK_BARCODE":c=l(a,s,n);break;default:c={success:!1,message:`Loại xử lý "${r}" không được hỗ trợ.`}}self.postMessage(c)}})();
