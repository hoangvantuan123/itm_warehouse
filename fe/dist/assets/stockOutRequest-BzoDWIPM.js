import{K as ce,k as ea,m as re,n as ta,o as aa,p as sa,q as na,t as oa,r as s,v as Me,w as jt,x as Z,N as la,y as ia,z as ca,A as ra,J as da,L as ua,O as E,P as ma,Q as pa,U as fa,V as ga,W as ha,X as xa,Y as Sa,Z as Ca,j as a,F as _,b as ba,c as U,d as St,S as J,I as W,B as H,R as je,u as kt,C as F,G as x,D as ke,M as Ae,a as wt,H as It,E as Ct,e as ya,f as bt,l as Na,g as va,T as ja,s as ye,h as ka}from"./index-UUASkvhf.js";import{A as we}from"./index-9Cd1RZUQ.js";import{G as qe}from"./getCodeHelpCombo-Ctu4Gz_d.js";import{C as wa}from"./index-B_zjsOdC.js";import{R as Ia}from"./moment-D75CyfG3.js";import{R as $a}from"./FileDoneOutlined-CCjiKJ2R.js";import{R as Ie}from"./FilterOutlined-CkwkNKIO.js";import{M as yt}from"./modalWaiting-BurJRaeF.js";const Oa=e=>{const{componentCls:t,notificationMarginEdge:o,animationMaxHeight:n}=e,i=`${t}-notice`,r=new ce("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),f=new ce("antNotificationTopFadeIn",{"0%":{top:-n,opacity:0},"100%":{top:0,opacity:1}}),d=new ce("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(n).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),l=new ce("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[i]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:f}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:d}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:r}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:o,_skip_check_:!0},[i]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:l}}}}},Da=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Ta={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Pa=(e,t)=>{const{componentCls:o}=e;return{[`${o}-${t}`]:{[`&${o}-stack > ${o}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[Ta[t]]:{value:0,_skip_check_:!0}}}}},Ra=e=>{const t={};for(let o=1;o<e.notificationStackLayer;o++)t[`&:nth-last-child(${o+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},qa=e=>{const t={};for(let o=1;o<e.notificationStackLayer;o++)t[`&:nth-last-child(${o+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},Ea=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},Ra(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},qa(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Da.map(o=>Pa(e,o)).reduce((o,n)=>Object.assign(Object.assign({},o),n),{}))},$t=e=>{const{iconCls:t,componentCls:o,boxShadow:n,fontSizeLG:i,notificationMarginBottom:r,borderRadiusLG:f,colorSuccess:d,colorInfo:l,colorWarning:p,colorError:g,colorTextHeading:b,notificationBg:y,notificationPadding:O,notificationMarginEdge:T,notificationProgressBg:j,notificationProgressHeight:m,fontSize:k,lineHeight:u,width:I,notificationIconSize:h,colorText:P}=e,C=`${o}-notice`;return{position:"relative",marginBottom:r,marginInlineStart:"auto",background:y,borderRadius:f,boxShadow:n,[C]:{padding:O,width:I,maxWidth:`calc(100vw - ${re(e.calc(T).mul(2).equal())})`,overflow:"hidden",lineHeight:u,wordWrap:"break-word"},[`${C}-message`]:{marginBottom:e.marginXS,color:b,fontSize:i,lineHeight:e.lineHeightLG},[`${C}-description`]:{fontSize:k,color:P},[`${C}-closable ${C}-message`]:{paddingInlineEnd:e.paddingLG},[`${C}-with-icon ${C}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(h).equal(),fontSize:i},[`${C}-with-icon ${C}-description`]:{marginInlineStart:e.calc(e.marginSM).add(h).equal(),fontSize:k},[`${C}-icon`]:{position:"absolute",fontSize:h,lineHeight:1,[`&-success${t}`]:{color:d},[`&-info${t}`]:{color:l},[`&-warning${t}`]:{color:p},[`&-error${t}`]:{color:g}},[`${C}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},ta(e)),[`${C}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${re(f)} * 2)`,left:{_skip_check_:!0,value:f},right:{_skip_check_:!0,value:f},bottom:0,blockSize:m,border:0,"&, &::-webkit-progress-bar":{borderRadius:f,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:j},"&::-webkit-progress-value":{borderRadius:f,background:j}},[`${C}-btn`]:{float:"right",marginTop:e.marginSM}}},Ma=e=>{const{componentCls:t,notificationMarginBottom:o,notificationMarginEdge:n,motionDurationMid:i,motionEaseInOut:r}=e,f=`${t}-notice`,d=new ce("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:o},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},aa(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:n,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:r,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:r,animationFillMode:"both",animationDuration:i,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:d,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${f}-btn`]:{float:"left"}}})},{[t]:{[`${f}-wrapper`]:Object.assign({},$t(e))}}]},Ot=e=>({zIndexPopup:e.zIndexPopupBase+sa+50,width:384}),Dt=e=>{const t=e.paddingMD,o=e.paddingLG;return na(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:o,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${re(e.paddingMD)} ${re(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},Tt=ea("Notification",e=>{const t=Dt(e);return[Ma(t),Oa(t),Ea(t)]},Ot),Aa=oa(["Notification","PurePanel"],e=>{const t=`${e.componentCls}-notice`,o=Dt(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},$t(o)),{width:o.width,maxWidth:`calc(100vw - ${re(e.calc(o.notificationMarginEdge).mul(2).equal())})`,margin:0})}},Ot);var Ba=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]]);return o};function Be(e,t){return t===null||t===!1?null:t||s.createElement(ia,{className:`${e}-close-icon`})}const za={success:ca,info:ra,error:da,warning:ua},Pt=e=>{const{prefixCls:t,icon:o,type:n,message:i,description:r,btn:f,role:d="alert"}=e;let l=null;return o?l=s.createElement("span",{className:`${t}-icon`},o):n&&(l=s.createElement(za[n]||null,{className:Z(`${t}-icon`,`${t}-icon-${n}`)})),s.createElement("div",{className:Z({[`${t}-with-icon`]:l}),role:d},l,s.createElement("div",{className:`${t}-message`},i),s.createElement("div",{className:`${t}-description`},r),f&&s.createElement("div",{className:`${t}-btn`},f))},Fa=e=>{const{prefixCls:t,className:o,icon:n,type:i,message:r,description:f,btn:d,closable:l=!0,closeIcon:p,className:g}=e,b=Ba(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:y}=s.useContext(Me),O=t||y("notification"),T=`${O}-notice`,j=jt(O),[m,k,u]=Tt(O,j);return m(s.createElement("div",{className:Z(`${T}-pure-panel`,k,o,u,j)},s.createElement(Aa,{prefixCls:O}),s.createElement(la,Object.assign({},b,{prefixCls:O,eventKey:"pure",duration:null,closable:l,className:Z({notificationClassName:g}),closeIcon:Be(O,p),content:s.createElement(Pt,{prefixCls:T,icon:n,type:i,message:r,description:f,btn:d})}))))};function _a(e,t,o){let n;switch(e){case"top":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":n={left:0,top:t,bottom:"auto"};break;case"topRight":n={right:0,top:t,bottom:"auto"};break;case"bottom":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:o};break;case"bottomLeft":n={left:0,top:"auto",bottom:o};break;default:n={right:0,top:"auto",bottom:o};break}return n}function Ua(e){return{motionName:`${e}-fade`}}var La=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]]);return o};const Nt=24,Ha=4.5,Ga="topRight",Wa=e=>{let{children:t,prefixCls:o}=e;const n=jt(o),[i,r,f]=Tt(o,n);return i(E.createElement(fa,{classNames:{list:Z(r,f,n)}},t))},Va=(e,t)=>{let{prefixCls:o,key:n}=t;return E.createElement(Wa,{prefixCls:o,key:n},e)},Ka=E.forwardRef((e,t)=>{const{top:o,bottom:n,prefixCls:i,getContainer:r,maxCount:f,rtl:d,onAllRemoved:l,stack:p,duration:g,pauseOnHover:b=!0,showProgress:y}=e,{getPrefixCls:O,getPopupContainer:T,notification:j,direction:m}=s.useContext(Me),[,k]=ma(),u=i||O("notification"),I=S=>_a(S,o??Nt,n??Nt),h=()=>Z({[`${u}-rtl`]:d??m==="rtl"}),P=()=>Ua(u),[C,N]=pa({prefixCls:u,style:I,className:h,motion:P,closable:!0,closeIcon:Be(u),duration:g??Ha,getContainer:()=>(r==null?void 0:r())||(T==null?void 0:T())||document.body,maxCount:f,pauseOnHover:b,showProgress:y,onAllRemoved:l,renderNotifications:Va,stack:p===!1?!1:{threshold:typeof p=="object"?p==null?void 0:p.threshold:void 0,offset:8,gap:k.margin}});return E.useImperativeHandle(t,()=>Object.assign(Object.assign({},C),{prefixCls:u,notification:j})),N});function Rt(e){const t=E.useRef(null);return ga(),[E.useMemo(()=>{const n=d=>{var l;if(!t.current)return;const{open:p,prefixCls:g,notification:b}=t.current,y=`${g}-notice`,{message:O,description:T,icon:j,type:m,btn:k,className:u,style:I,role:h="alert",closeIcon:P,closable:C}=d,N=La(d,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),S=Be(y,typeof P<"u"?P:b==null?void 0:b.closeIcon);return p(Object.assign(Object.assign({placement:(l=e==null?void 0:e.placement)!==null&&l!==void 0?l:Ga},N),{content:E.createElement(Pt,{prefixCls:y,icon:j,type:m,message:O,description:T,btn:k,role:h}),className:Z(m&&`${y}-${m}`,u,b==null?void 0:b.className),style:Object.assign(Object.assign({},b==null?void 0:b.style),I),closeIcon:S,closable:C??!!S}))},r={open:n,destroy:d=>{var l,p;d!==void 0?(l=t.current)===null||l===void 0||l.close(d):(p=t.current)===null||p===void 0||p.destroy()}};return["success","info","warning","error"].forEach(d=>{r[d]=l=>n(Object.assign(Object.assign({},l),{type:d}))}),r},[]),E.createElement(Ka,Object.assign({key:"notification-holder"},e,{ref:t}))]}function Ya(e){return Rt(e)}let L=null,Ne=e=>e(),ve=[],de={};function vt(){const{getContainer:e,rtl:t,maxCount:o,top:n,bottom:i,showProgress:r,pauseOnHover:f}=de,d=(e==null?void 0:e())||document.body;return{getContainer:()=>d,rtl:t,maxCount:o,top:n,bottom:i,showProgress:r,pauseOnHover:f}}const Xa=E.forwardRef((e,t)=>{const{notificationConfig:o,sync:n}=e,{getPrefixCls:i}=s.useContext(Me),r=de.prefixCls||i("notification"),f=s.useContext(Ca),[d,l]=Rt(Object.assign(Object.assign(Object.assign({},o),{prefixCls:r}),f.notification));return E.useEffect(n,[]),E.useImperativeHandle(t,()=>{const p=Object.assign({},d);return Object.keys(p).forEach(g=>{p[g]=function(){return n(),d[g].apply(d,arguments)}}),{instance:p,sync:n}}),l}),Qa=E.forwardRef((e,t)=>{const[o,n]=E.useState(vt),i=()=>{n(vt)};E.useEffect(i,[]);const r=Sa(),f=r.getRootPrefixCls(),d=r.getIconPrefixCls(),l=r.getTheme(),p=E.createElement(Xa,{ref:t,sync:i,notificationConfig:o});return E.createElement(xa,{prefixCls:f,iconPrefixCls:d,theme:l},r.holderRender?r.holderRender(p):p)});function ze(){if(!L){const e=document.createDocumentFragment(),t={fragment:e};L=t,Ne(()=>{ha(E.createElement(Qa,{ref:o=>{const{instance:n,sync:i}=o||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=i,ze())})}}),e)});return}L.instance&&(ve.forEach(e=>{switch(e.type){case"open":{Ne(()=>{L.instance.open(Object.assign(Object.assign({},de),e.config))});break}case"destroy":Ne(()=>{L==null||L.instance.destroy(e.key)});break}}),ve=[])}function Ja(e){de=Object.assign(Object.assign({},de),e),Ne(()=>{var t;(t=L==null?void 0:L.sync)===null||t===void 0||t.call(L)})}function qt(e){ve.push({type:"open",config:e}),ze()}const Za=e=>{ve.push({type:"destroy",key:e}),ze()},es=["success","info","warning","error"],ts={open:qt,destroy:Za,config:Ja,useNotification:Ya,_InternalPanelDoNotUseOrYouWillBeFired:Fa},Et=ts;es.forEach(e=>{Et[e]=t=>qt(Object.assign(Object.assign({},t),{type:e}))});function as({formData:e,setFormData:t,setToDate:o,toDate:n,dataUnit:i,setBizUnit:r,handleSearch1:f,handleSearch2:d,handleSearch3:l,minorName:p,setFactUnit:g,setProgStatus:b,minorName2:y,setUseType:O,deptName:T,empName:j,custName:m,prodPlanNo:k,setProdPlanNo:u,setWorkOrderNo:I,workOrderNo:h,prodReqNo:P,setProdReqNo:C,outReqNo:N,setOutReqNo:S,setDeptName:v,setDeptSeq:D,resetTable:R,setEmpName:B,setEmpSeq:M,resetTable2:G,setCustSeq:z,setCustName:V,resetTable3:ue}){const ee=c=>{t(c)},Y=c=>{o(c)},te=c=>{g(c)},me=c=>{b(c)},ae=c=>{O(c)},ne=c=>{v(c.target.value),D(""),R()},oe=c=>{B(c.target.value),M(""),G()},pe=c=>{V(c.target.value),z(""),ue()};return a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(_,{layout:"vertical",onKeyDown:c=>{c.key==="Enter"&&c.preventDefault()},children:a.jsxs(ba,{className:"gap-4 flex items-center ",children:[a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Ngày yêu cầu 1"}),className:"mb-0",children:a.jsx(St,{className:"w-full text-sm p-2",value:e,onChange:ee,format:"YYYY-MM-DD"})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Ngày yêu cầu 2"}),className:"mb-0",children:a.jsx(St,{className:"w-full text-sm p-2",value:n,onChange:Y,format:"YYYY-MM-DD"})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Nơi sản xuất"}),className:"mb-0",children:a.jsx(J,{defaultValue:"",size:"large",style:{width:190},allowClear:!0,onChange:te,options:[{label:"All",value:""},...(i==null?void 0:i.map(c=>({label:c==null?void 0:c.AccUnitName,value:c==null?void 0:c.FactUnit})))||[]]})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Bộ phận yêu cầu"}),className:"mb-0",children:a.jsx(W,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:c=>{c.key==="Enter"&&f()},value:T,onChange:ne,onDoubleClick:f})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Người yêu cầu"}),className:"mb-0",children:a.jsx(W,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:c=>{c.key==="Enter"&&d()},value:j,onChange:oe,onDoubleClick:d})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Khách hàng"}),className:"mb-0",children:a.jsx(W,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:c=>{c.key==="Enter"&&l()},value:m,onChange:pe,onDoubleClick:l})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số yêu cầu"}),className:"mb-0",children:a.jsx(W,{value:N,onChange:c=>S(c.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số kế hoạch"}),className:"mb-0",children:a.jsx(W,{value:k,onChange:c=>u(c.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số lệnh sản xuất"}),className:"mb-0",children:a.jsx(W,{value:h,onChange:c=>I(c.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số yêu cầu sản xuất"}),className:"mb-0",children:a.jsx(W,{value:P,onChange:c=>C(c.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Phân loại kho"}),className:"mb-0",children:a.jsx(J,{id:"typeSelect",defaultValue:"All",size:"large",style:{width:240},allowClear:!0,onChange:ae,options:[{label:"All",value:""},...(y==null?void 0:y.map(c=>({label:c==null?void 0:c.MinorName,value:c==null?void 0:c.Value})))||[]]})})}),a.jsx(U,{children:a.jsx(_.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Trạng thái"}),className:"mb-0",children:a.jsx(J,{id:"typeSelect",defaultValue:"All",size:"large",style:{width:240},allowClear:!0,onChange:me,options:[{label:"All",value:""},...(p==null?void 0:p.map(c=>({label:c==null?void 0:c.MinorName,value:c==null?void 0:c.Value})))||[]]})})})]})})})}function ss({nextPage:e,debouncedFetchSPDMMOutReqListQueryWeb:t}){return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(H,{type:"default",icon:a.jsx($a,{}),size:"middle",className:"uppercase",color:"default",variant:"filled",onClick:e,style:{backgroundColor:"#f0f0f0",borderColor:"#d9d9d9"},children:"XỬ LÝ XUẤT KHO"},"Reset"),a.jsx(H,{type:"primary",icon:a.jsx(je,{}),size:"middle",onClick:t,className:"uppercase",children:"SEARCH"},"Save")]})}function ns({data:e,onCellClicked:t,gridData:o,setGridData:n,loading:i}){const[r,f]=s.useState(!1),d=s.useCallback(()=>f(!1),[]);s.useState([!1,!1,!1]);const{t:l}=kt(),[p,g]=s.useState({columns:F.empty(),rows:F.empty()}),b=s.useMemo(()=>[{title:l("1326")},{title:l("607")},{title:l("60498")},{title:l("200")},{title:l("647")},{title:l("366")},{title:l("1794")},{title:l("600")},{title:l("1985")},{title:l("2102")},{title:l("2101")},{title:l("510")},{title:l("3244")},{title:l("2846")},{title:l("2170")},{title:l("2169")},{title:l("1969")},{title:l("602")},{title:l("4382")},{title:l("9542")},{title:l("13570")},{title:l("362")},{title:l("369")}],[]),[y,O]=s.useState(b),T=s.useCallback((u,I)=>{const h=y.indexOf(u);if(h!==-1){const P={...u,width:I},C=[...y];C.splice(h,1,P),O(C)}},[y]),j=s.useCallback(([u,I])=>{const h=o[I]||{},{IsStop:P="",IsConfirm:C="",FactUnitName:N="",ReqDate:S="",OutReqNo:v="",DeptName:D="",EmpName:R="",UseTypeName:B="",WorkOrderNo:M="",AssyItemName:G="",AssyItemNo:z="",AssyItemSpec:V="",AssyUnitName:ue="",ProcName:ee="",ItemName:Y="",ItemNo:te="",ItemSpec:me="",UnitName:ae="",Qty:ne="",ProgQty:oe="",IsReturn:pe="",Remark:c="",ProgStatusName:fe=""}=h,q=K=>K!=null?String(K):"",ge={0:{kind:x.Boolean,data:P},1:{kind:x.Boolean,data:C},2:{kind:x.Text,data:q(N)},3:{kind:x.Text,data:q(S)},4:{kind:x.Text,data:q(v)},5:{kind:x.Text,data:q(D)},6:{kind:x.Text,data:q(R)},7:{kind:x.Text,data:q(B)},8:{kind:x.Text,data:q(M)},9:{kind:x.Text,data:q(G)},10:{kind:x.Text,data:q(z)},11:{kind:x.Text,data:q(V)},12:{kind:x.Text,data:q(ue)},13:{kind:x.Text,data:q(ee)},14:{kind:x.Text,data:q(Y)},15:{kind:x.Text,data:q(te)},16:{kind:x.Text,data:q(me)},17:{kind:x.Text,data:q(ae)},18:{kind:x.Text,data:q(ne)},19:{kind:x.Text,data:q(oe)},20:{kind:x.Boolean,data:pe},21:{kind:x.Text,data:q(c)},22:{kind:x.Text,data:q(fe)}};if(ge.hasOwnProperty(u)){const{kind:K,data:he}=ge[u];return{kind:K,data:he,displayData:he}}return{kind:"",data:"",displayData:""}},[o]),[m,k]=s.useState(void 0);return s.useCallback(u=>{console.log("cell",u),k(u)},[]),s.useEffect(()=>{n(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8  overflow-hidden",children:a.jsxs("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 p-2 text-blue-600 uppercase",children:[a.jsx(Ia,{}),"DATA SHEET"]}),a.jsx(ke,{columns:y,getCellContent:j,rows:o.length,showSearch:r,getCellsForSelection:!0,onSearchClose:d,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:T,smoothScrollY:!0,smoothScrollX:!0,rowSelect:"single",onCellClicked:t,gridSelection:p,onGridSelectionChange:g,getRowThemeOverride:u=>u%2===0?void 0:{bgCell:"#FBFBFB"}})]})})}function os({data:e,onCellClicked:t,setSelection:o,selection:n}){const[i,r]=s.useState([]),[f,d]=s.useState(!1),l=s.useCallback(()=>d(!1),[]),p=s.useMemo(()=>[{title:"BeDeptName"},{title:"BeBegDate"},{title:"BeEndDate"},{title:"DeptRemark"}],[]),[g,b]=s.useState(p),y=s.useCallback((m,k)=>{const u=g.indexOf(m);if(u!==-1){const I={...m,width:k},h=[...g];h.splice(u,1,I),b(h)}},[g]),O=s.useCallback(([m,k])=>{const u=i[k]||{},{BeDeptName:I="",BeBegDate:h="",BeEndDate:P="",DeptRemark:C=""}=u,N=v=>v!=null?String(v):"",S={0:{kind:x.Text,data:N(I)},1:{kind:x.Text,data:N(h)},2:{kind:x.Text,data:N(P)},3:{kind:x.Text,data:N(C)}};if(S.hasOwnProperty(m)){const{kind:v,data:D}=S[m];return{kind:v,data:D,displayData:D}}return{kind:x.Text,data:"",displayData:""}},[i]),[T,j]=s.useState(void 0);return s.useCallback(m=>{j(m)},[]),s.useEffect(()=>{r(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:a.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:a.jsx(ke,{columns:g,getCellContent:O,rows:i.length,showSearch:f,getCellsForSelection:!0,onSearchClose:l,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:y,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:t,rowSelect:"single",gridSelection:n,onGridSelectionChange:o})})})}const{Search:ls}=W;function is({setConditionSeq:e,data:t,modalVisible:o,setModalVisible:n,fetchCodehelpData1:i,handleSearch:r,setSubConditionSql:f,setDeptName:d,setDeptSeq:l,deptName:p,selection:g,setSelection:b,resetTable:y}){const[O,T]=s.useState(!1),[j,m]=s.useState(null),[k,u]=s.useState(null);s.useState(null);const I=S=>{e(S)},h=S=>{f(S)},P=(S,v)=>{let D;if(S[0]!==-1){console.log("onCellClicked");return}if(S[0]===-1?(D=S[1],T(!0)):(D=S[0],T(!1)),j&&j[0]===S[0]&&j[1]===S[1]){d(""),l(""),m(null),u(null);return}if(D>=0&&D<t.length){const R=t[D];d(R==null?void 0:R.BeDeptName),l(R==null?void 0:R.BeDeptSeq),u(R),m(S)}},C=()=>{n(!1),d(""),l(""),y()},N=S=>{d(S.target.value),l(""),y()};return a.jsx("div",{children:a.jsxs(Ae,{open:o,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[a.jsx(Ie,{}),"Điều kiện truy vấn"]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(we,{})})]}),a.jsxs("div",{className:"flex p-2 gap-4",children:[a.jsx("div",{className:"flex flex-col",children:a.jsx(J,{id:"typeSelect",defaultValue:"Bộ phận",style:{width:120},size:"middle",onChange:I,options:[{value:1,label:"Bộ phận"},{value:0,label:"Mã bộ phận"}]})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(J,{id:"typeSelect",defaultValue:"Sử dụng",style:{width:300},size:"middle",options:[{value:"IsUse = 1",label:"Sử dụng"},{value:"IsUse = 0",label:"Chưa sử dụng"}],onChange:h})}),a.jsx("div",{className:"flex flex-col w-full",children:a.jsx(ls,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:p,onKeyDown:S=>{S.key==="Enter"&&r()},onChange:N,className:" w-full"})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(H,{type:"primary",icon:a.jsx(je,{}),size:"middle",onClick:i,children:"Truy vấn"})})]})]}),a.jsx(os,{data:t,onCellClicked:P,setSelection:b,selection:g})]}),a.jsxs("div",{className:"flex justify-end gap-4 ",children:[a.jsx(H,{onClick:C,children:"Cancel"}),a.jsx(H,{type:"primary",onClick:()=>n(!1),children:"Save"})]})]})})}function cs({data:e,onCellClicked:t,setSelection:o,selection:n}){const[i,r]=s.useState([]),[f,d]=s.useState(!1),l=s.useCallback(()=>d(!1),[]),p=s.useMemo(()=>[{title:"EmpName"},{title:"EmpID"},{title:"DeptName"},{title:"WkDeptName"},{title:"UMJoName"},{title:"PosName"},{title:"UMJpName"},{title:"UMJdName"},{title:"TypeName"},{title:"SMSexName"}],[]),[g,b]=s.useState(p),y=s.useCallback((m,k)=>{const u=g.indexOf(m);if(u!==-1){const I={...m,width:k},h=[...g];h.splice(u,1,I),b(h)}},[g]),O=s.useCallback(([m,k])=>{const u=i[k]||{},{EmpName:I="",EmpID:h="",DeptName:P="",WkDeptName:C="",UMJoName:N="",PosName:S="",UMJpName:v="",UMJdName:D="",TypeName:R="",SMSexName:B=""}=u,M=z=>z!=null?String(z):"",G={0:{kind:x.Text,data:M(I)},1:{kind:x.Text,data:M(h)},2:{kind:x.Text,data:M(P)},3:{kind:x.Text,data:M(C)},4:{kind:x.Text,data:M(N)},5:{kind:x.Text,data:M(S)},6:{kind:x.Text,data:M(v)},7:{kind:x.Text,data:M(D)},8:{kind:x.Text,data:M(R)},9:{kind:x.Text,data:M(B)}};if(G.hasOwnProperty(m)){const{kind:z,data:V}=G[m];return{kind:z,data:V,displayData:V}}return{kind:x.Text,data:"",displayData:""}},[i]),[T,j]=s.useState(void 0);return s.useCallback(m=>{console.log("cell",m),j(m)},[]),s.useEffect(()=>{r(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:a.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:a.jsx(ke,{columns:g,getCellContent:O,rows:i.length,showSearch:f,getCellsForSelection:!0,onSearchClose:l,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:y,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:t,rowSelect:"multi",gridSelection:n,onGridSelectionChange:o})})})}const{Search:rs}=W;function ds({setConditionSeq:e,data:t,modalVisible:o,setModalVisible:n,empName:i,handleSearch:r,setSubConditionSql:f,fetchCodehelpData2:d,setEmpSeq:l,setEmpName:p,setSelection:g,selection:b,resetTable:y}){const[O,T]=s.useState(!1),[j,m]=s.useState(null),[k,u]=s.useState(null);s.useState(null);const I=N=>{e(N)},h=(N,S)=>{let v;if(N[0]===-1){if(N[0]===-1?(v=N[1],T(!0)):(v=N[0],T(!1)),j&&j[0]===N[0]&&j[1]===N[1]){p(""),l(""),m(null),u(null);return}if(v>=0&&v<t.length){const D=t[v];p(D==null?void 0:D.EmpName),l(D==null?void 0:D.EmpSeq),u(D),m(N)}}},P=()=>{n(!1),p(""),l(""),y()},C=N=>{p(N.target.value),l(""),y()};return a.jsx("div",{children:a.jsxs(Ae,{open:o,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[a.jsx(Ie,{}),"Điều kiện truy vấn"]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(we,{})})]}),a.jsxs("div",{className:"flex p-2 gap-4",children:[a.jsx("div",{className:"flex flex-col",children:a.jsx(J,{id:"typeSelect",defaultValue:"Nhân viên",style:{width:180},size:"middle",options:[{value:1,label:"Nhân viên"},{value:2,label:"Mã nhân viên"}],onChange:I})}),a.jsx("div",{className:"flex flex-col w-full",children:a.jsx(rs,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:i,onKeyDown:N=>{N.key==="Enter"&&r()},onChange:C,className:" w-full"})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(H,{type:"primary",icon:a.jsx(je,{}),size:"middle",onClick:d,children:"Truy vấn"})})]})]}),a.jsx(cs,{data:t,onCellClicked:h,setSelection:g,selection:b})]}),a.jsxs("div",{className:"flex justify-end gap-4 ",children:[a.jsx(H,{onClick:P,children:"Cancel"}),a.jsx(H,{type:"primary",onClick:()=>n(!1),children:"Save"})]})]})})}function us({data:e,onCellClicked:t,selection:o,setSelection:n}){const[i,r]=s.useState([]),[f,d]=s.useState(!1),l=s.useCallback(()=>d(!1),[]),p=s.useMemo(()=>[{title:"CustSeq"},{title:"FullName"},{title:"CustNo"},{title:"BizNo"},{title:"UMCustClassName"}],[]),[g,b]=s.useState(p),y=s.useCallback((m,k)=>{const u=g.indexOf(m);if(u!==-1){const I={...m,width:k},h=[...g];h.splice(u,1,I),b(h)}},[g]),O=s.useCallback(([m,k])=>{const u=i[k]||{},{CustSeq:I="",FullName:h="",CustNo:P="",BizNo:C="",UMCustClassName:N=""}=u,S=D=>D!=null?String(D):"",v={0:{kind:x.Text,data:S(I)},1:{kind:x.Text,data:S(h)},2:{kind:x.Text,data:S(P)},3:{kind:x.Text,data:S(C)},4:{kind:x.Text,data:S(N)}};if(v.hasOwnProperty(m)){const{kind:D,data:R}=v[m];return{kind:D,data:R,displayData:R}}return{kind:x.Text,data:"",displayData:""}},[i]),[T,j]=s.useState(void 0);return s.useCallback(m=>{console.log("cell",m),j(m)},[]),s.useEffect(()=>{r(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:a.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:a.jsx(ke,{columns:g,getCellContent:O,rows:i.length,showSearch:f,getCellsForSelection:!0,onSearchClose:l,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:y,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:t,rowSelect:"multi",gridSelection:o,onGridSelectionChange:n})})})}const{Search:ms}=W;function ps({setConditionSeq:e,data:t,modalVisible:o,setModalVisible:n,setKeyword:i,keyword:r,handleSearch:f,setSubConditionSql:d,fetchCodehelpData3:l,setCustSeq:p,setCustName:g,custName:b,resetTable:y,setSelection:O,selection:T}){const[j,m]=s.useState(!1),[k,u]=s.useState(null),[I,h]=s.useState(null);s.useState(null);const P=v=>{e(v)},C=(v,D)=>{let R;if(v[0]===-1){if(v[0]===-1?(R=v[1],m(!0)):(R=v[0],m(!1)),k&&k[0]===v[0]&&k[1]===v[1]){g(""),p(""),u(null),h(null);return}if(R>=0&&R<t.length){const B=t[R];g(B==null?void 0:B.FullName),p(B==null?void 0:B.CustSeq),h(B),u(v)}}},N=()=>{n(!1),g(""),p(""),y()},S=v=>{g(v.target.value),p(""),y()};return a.jsx("div",{children:a.jsxs(Ae,{open:o,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[a.jsx(Ie,{}),"Điều kiện truy vấn"]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(we,{})})]}),a.jsxs("div",{className:"flex p-2 gap-4",children:[a.jsx("div",{className:"flex flex-col",children:a.jsx(J,{id:"typeSelect",defaultValue:"Điểm gia công bên ngoài",style:{width:220},size:"middle",options:[{value:1,label:"Điểm gia công bên ngoài"},{value:2,label:"Số đơn vị gia công"},{value:3,label:"Mã số kinh doanh"},{value:4,label:"Tương hiệu"}],onChange:P})}),a.jsx("div",{className:"flex flex-col w-full",children:a.jsx(ms,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:b,onKeyDown:v=>{v.key==="Enter"&&f()},onChange:S,className:" w-full"})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(H,{type:"primary",icon:a.jsx(je,{}),size:"middle",onClick:l,children:"Truy vấn"})})]})]}),a.jsx(us,{data:t,onCellClicked:C,setSelection:O,selection:T})]}),a.jsxs("div",{className:"flex justify-end gap-4 ",children:[a.jsx(H,{onClick:N,children:"Cancel"}),a.jsx(H,{type:"primary",onClick:()=>n(!1),children:"Save"})]})]})})}const fs=e=>`
       <DataBlock1>
    <WorkingTag>A</WorkingTag>
    <IDX_NO>1</IDX_NO>
    <Status>0</Status>
    <DataSeq>1</DataSeq>
    <Selected>1</Selected>
    <TABLE_NAME>DataBlock1</TABLE_NAME>
    <IsChangedMst>${e.IsChangedMst}</IsChangedMst>
    <FactUnit>${e.FactUnit}</FactUnit>
    <ReqDate>${e.ReqDate}</ReqDate>
    <ReqDateTo>${e.ReqDateTo}</ReqDateTo>
    <OutReqNo>${e.OutReqNo}</OutReqNo>
    <UseType>${e.UseType}</UseType>
    <DeptSeq>${e.DeptSeq}</DeptSeq>
    <DeptName>${e.DeptName} </DeptName>
    <EmpSeq>${e.EmpSeq} </EmpSeq>
    <EmpName>${e.EmpName}</EmpName>
    <CustSeq>${e.CustSeq}</CustSeq>
    <CustName>${e.CustName}</CustName>
    <ProgStatus>${e.ProgStatus}</ProgStatus>
    <ProdPlanNo>${e.ProdPlanNo}</ProdPlanNo>
    <WorkOrderNo>${e.WorkOrderNo}</WorkOrderNo>
    <ProdReqNo>${e.ProdReqNo}</ProdReqNo>
  </DataBlock1>
    `,gs={xmlFlags:2,serviceSeq:4594,workingTag:"",companySeq:1,languageSeq:6,userSeq:3106,pgmSeq:1036085},hs=e=>{const t={...gs,...e},n={xmlDocument:fs(t),xmlFlags:t.xmlFlags,serviceSeq:t.serviceSeq,workingTag:t.workingTag,companySeq:t.companySeq,languageSeq:t.languageSeq,userSeq:t.userSeq,pgmSeq:t.pgmSeq};return wt.post(`${It}/mssql/stock-out/sp-dmm-out-req-list`,n,{headers:{"Content-Type":"application/json"}}).then(i=>{if(i.status===200||i.status===201)return i.data;throw new Error("Error from API: "+i.data.message)}).catch(i=>{const r=i.response?i.response.data.message||"Error from API":"Unknown error occurred";throw new Error(r)})},Ee=async(e,t,o,n,i,r,f,d,l,p,g,b,y,O,T,j,m,k,u,I)=>{try{const h=`${It}/mssql/code-help-query`,P=await wt.get(h,{params:{workingTag:e,languageSeq:t,codeHelpSeq:o,companySeq:n,keyword:i,param1:r,param2:f,param3:d,param4:l,conditionSeq:p,pageCount:g,pageSize:b,subConditionSql:y,accUnit:O,bizUnit:T,factUnit:j,deptSeq:m,wkDeptSeq:k,empSeq:u,userSeq:I},headers:{"Content-Type":"application/json"}});return P.status===200?{success:!0,data:P.data.data}:{success:!1,message:Ct.ERROR}}catch(h){return{success:!1,message:h.response?h.response.data.message:Ct.ERROR}}},{Title:xs,Text:Is}=ja;function $s({permissions:e,isMobile:t}){const{t:o}=kt();s.useRef(null);const n=ya(),[i,r]=s.useState(!1),[f,d]=s.useState(null),[l,p]=s.useState(!1),[g,b]=s.useState([]),[y,O]=s.useState([]),[T,j]=s.useState([]),[m,k]=s.useState([]),[u,I]=s.useState(bt().startOf("month")||""),[h,P]=s.useState(bt()),[C,N]=s.useState(4),[S,v]=s.useState(""),[D,R]=s.useState(""),[B,M]=s.useState(""),[G,z]=s.useState(null),V=s.useCallback(w=>w.format("YYYYMMDD"),""),[ue,ee]=s.useState(!1),[Y,te]=s.useState(null),[me,ae]=s.useState(null),[ne,oe]=s.useState([]),[pe,c]=s.useState(!1),[fe,q]=s.useState(!1),[ge,K]=s.useState([]),[he,Fe]=s.useState([]),[Mt,_e]=s.useState([]),[Ue,$e]=s.useState(!1),[At,Le]=s.useState(!1),[xe,Oe]=s.useState(!1),[se,De]=s.useState(1),[le,Te]=s.useState(1),[X,Pe]=s.useState(""),[Se,He]=s.useState(""),[Bt,Ge]=s.useState(""),[We,Ve]=s.useState(""),[zt,Ke]=s.useState(""),[Ft,Ye]=s.useState(""),[Xe,Qe]=s.useState(""),[Je,_t]=s.useState(""),[Ze,Ut]=s.useState(""),[et,Lt]=s.useState(""),[tt,Ht]=s.useState(""),[Gt,at]=s.useState(!1),[Wt,st]=s.useState(!1),[nt,Ce]=s.useState(!0),[Vt,ot]=s.useState({columns:F.empty(),rows:F.empty()}),[Kt,lt]=s.useState({columns:F.empty(),rows:F.empty()}),[Yt,it]=s.useState({columns:F.empty(),rows:F.empty()}),be=()=>{ot({columns:F.empty(),rows:F.empty()})},ct=()=>{lt({columns:F.empty(),rows:F.empty()})},rt=()=>{it({columns:F.empty(),rows:F.empty()})};s.useEffect(()=>{const w=localStorage.getItem("detailsStateStockOut");c(w==="open")},[]);const dt=async()=>{if(nt===!1){ye.warning("Không thể thực hiện, vui lòng kiểm tra trạng thái.");return}Ce(!1),d(!0);const w=ye.loading("Đang tải dữ liệu, vui lòng chờ...",0);try{const Q={IsChangedMst:"1",FactUnit:S,ReqDate:u?V(u):"",ReqDateTo:h?V(h):"",OutReqNo:tt,UseType:B,DeptName:"",DeptSeq:Bt,EmpSeq:zt,EmpName:"",CustSeq:Ft,CustName:"",ProgStatus:D,ProdPlanNo:Je,WorkOrderNo:Ze,ProdReqNo:et},A=await hs(Q);if(A!=null&&A.success){const $=(A==null?void 0:A.data)||[];b($),Ce(!0),w()}else b([]),ye.error("Có lỗi xảy ra khi tải dữ liệu.")}catch{p(!0),Ce(!0),w(),Et.destroy(),ye.error("Có lỗi xảy ra khi tải dữ liệu.")}finally{Ce(!0),d(!1)}},ut=s.useCallback(async()=>{r(!0);try{const w=await Ee("Q",6,10010,1,Se,"","","","",se,1,1e5,le,"1",0,0,0,0,0,18770);K((w==null?void 0:w.data)||[])}catch{K([])}finally{r(!1)}},[se,le,Se]),mt=s.useCallback(async()=>{r(!0);try{const w=await Ee("Q",6,10009,1,X,"","","","",se,1,1e5,le,"1",0,0,0,0,0,18770);Fe((w==null?void 0:w.data)||[])}catch{Fe([])}finally{r(!1)}},[se,le,X]),pt=s.useCallback(async()=>{r(!0);try{const w=await Ee("Q",6,17071,1,X,"","","","",se,1,1e5,"SMCustStatus=2004001","1",0,0,0,0,0,18770);_e((w==null?void 0:w.data)||[])}catch{_e([])}finally{r(!1)}},[se,le,X]),ft=s.useCallback(async()=>{r(!0);try{const[w,Q,A]=await Promise.all([qe("",6,60001,1,"%","","","",""),qe("",6,19998,1,"%","6036","","",""),qe("",6,19998,1,"%","6044","","","")]);O((w==null?void 0:w.data)||[]),j((Q==null?void 0:Q.data)||[]),k((A==null?void 0:A.data)||[])}catch{O([]),j([])}finally{r(!1)}},[]),Re=s.useMemo(()=>Na.debounce(ft,100),[ft]),Xt=s.useCallback(()=>{G&&n(`/u/warehouse/material/stock-out-request/${G}`)},[G,n]),Qt=(w,Q)=>{let A;if(w[0]===-1){if(w[0]===-1?(A=w[1],ee(!0)):(A=w[0],ee(!1)),Y&&Y[0]===w[0]&&Y[1]===w[1]){z(null),te(null),ae(null);return}if(A>=0&&A<g.length){const $=g[A],ie={IDX_NO:$.IDX_NO,EmpName:$.EmpName,FactUnit:$.FactUnit,FactUnitName:$.FactUnitName,IsConfirm:$.IsConfirm,IsReturn:$.IsReturn,IsStop:$.IsStop,ItemName:$.ItemName,ItemNo:$.ItemNo,ItemSeq:$.ItemSeq,ItemSpec:$.ItemSpec,ItemUnitSeq:$.ItemUnitSeq,OSPPOSeq:$.OSPPOSeq,OutReqNo:$.OutReqNo,OutReqSeq:$.OutReqSeq,PJTSeq:$.PJTSeq,ProdPlanSeq:$.ProdPlanSeq,ProdReqNo:$.ProdReqNo,ProgQty:$.ProgQty,ProgStatus:$.ProgStatus,ProgStatusName:$.ProgStatusName,Qty:$.Qty,Remark:$.Remark,ReqDate:$.ReqDate,UnitName:$.UnitName,UseType:$.UseType,UseTypeName:$.UseTypeName,WBSSeq:$.WBSSeq,WorkOrderNo:$.WorkOrderNo},Jt=wa.AES.encrypt(JSON.stringify(ie),"TEST_ACCESS_KEY").toString();if(nt===!0)if(ie.IsStop===!0||ie.IsConfirm===!1)ie.IsStop===!0&&at(!0),ie.IsConfirm===!1&&st(!0),z(null);else{const Zt=ka(Jt);z(Zt),ae($),te(w)}}}},gt=async()=>{Oe(!0),q(!0),ut()},ht=async()=>{Oe(!0),$e(!0),mt()},xt=async()=>{Oe(!0),Le(!0),pt()};return s.useEffect(()=>(Re(),()=>{Re.cancel()}),[Re]),s.useEffect(()=>{dt()},[]),a.jsxs(a.Fragment,{children:[a.jsx(va,{children:a.jsxs("title",{children:["ITM - ",o("Stock Out Request")]})}),a.jsx("div",{className:"bg-slate-50 p-3 h-screen overflow-hidden",children:a.jsxs("div",{className:"flex flex-col gap-4 md:grid md:grid-cols-4 md:grid-rows-[auto_1fr] md:gap-4 h-full",children:[a.jsxs("div",{className:"col-start-1 col-end-5 row-start-1 w-full rounded-lg ",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(xs,{level:4,className:"mt-2 uppercase opacity-85 ",children:o("Stock Out Request")}),a.jsx(ss,{nextPage:Xt,debouncedFetchSPDMMOutReqListQueryWeb:dt})]}),a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600 uppercase",children:[a.jsx(Ie,{}),o("Điều kiện truy vấn")]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(we,{})})]}),a.jsx("div",{className:"flex p-2 gap-4",children:a.jsx(as,{formData:u,setFormData:I,setToDate:P,toDate:h,dataUnit:y,setBizUnit:N,deptName:Se,setDeptName:He,setDeptSeq:Ge,handleSearch1:gt,handleSearch2:ht,handleSearch3:xt,setModalVisible1:q,setModalVisible2:$e,loadingCodeHelp:xe,modalVisible1:fe,modalVisible2:Ue,setMinorName:j,minorName:T,setFactUnit:v,setProgStatus:R,minorName2:m,setUseType:M,empName:We,custName:Xe,setProdPlanNo:_t,prodPlanNo:Je,setWorkOrderNo:Ut,workOrderNo:Ze,setProdReqNo:Lt,prodReqNo:et,setOutReqNo:Ht,outReqNo:tt,resetTable:be,setEmpName:Ve,setEmpSeq:Ke,resetTable2:ct,resetTable3:rt,setCustName:Qe,setCustSeq:Ye})})]})]}),a.jsx("div",{className:"col-start-1 col-end-5 row-start-2 w-full h-full rounded-lg",children:a.jsx(ns,{data:g,loading:i,setData:b,onCellClicked:Qt,setGridData:oe,gridData:ne})})]})}),a.jsx(is,{setModalVisible:q,modalVisible:fe,loadingCodeHelp:xe,handleSearch:gt,data:ge,setConditionSeq:De,setSubConditionSql:Te,fetchCodehelpData1:ut,keyword:X,setKeyword:Pe,setDeptSeq:Ge,setDeptName:He,deptName:Se,setData1:K,setSelection:ot,selection:Vt,resetTable:be}),a.jsx(ds,{setModalVisible:$e,modalVisible:Ue,loadingCodeHelp:xe,handleSearch:ht,data:he,setConditionSeq:De,setSubConditionSql:Te,fetchCodehelpData2:mt,keyword:X,setKeyword:Pe,setEmpName:Ve,setEmpSeq:Ke,setSelection:lt,selection:Kt,resetTable:ct,empName:We}),a.jsx(ps,{setModalVisible:Le,modalVisible:At,loadingCodeHelp:xe,handleSearch:xt,data:Mt,setConditionSeq:De,setSubConditionSql:Te,fetchCodehelpData3:pt,keyword:X,setKeyword:Pe,setCustName:Qe,setCustSeq:Ye,resetTable:rt,setSelection:it,selection:Yt,custName:Xe}),a.jsx(yt,{modal2Open:Gt,setModal2Open:at,resetTable:be,error:"Đơn hàng đã được hoàn thành!",setKeyPath:z}),a.jsx(yt,{modal2Open:Wt,setModal2Open:st,resetTable:be,error:"Đơn hàng chưa được xác nhận!",setKeyPath:z})]})}export{$s as default};
