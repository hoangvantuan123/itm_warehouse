import{K as ge,k as Zt,m as he,n as ea,o as ta,p as aa,q as sa,t as na,r as s,v as _e,w as wt,x as Z,N as oa,y as la,z as ia,A as ca,J as ra,L as da,O as E,P as ua,Q as ma,U as pa,V as fa,W as ga,X as ha,Y as xa,Z as Sa,j as a,F as z,b as Ca,c as L,d as yt,S as J,I as V,B as W,R as $e,C as F,G as i,D as qe,M as Le,a as It,H as Tt,E as bt,f as ya,u as ba,e as Nt,l as Na,g as ka,T as va,s as fe,h as ja}from"./index-BJY6kUZk.js";import{A as De}from"./index-BSunLTxl.js";import{G as Fe}from"./getCodeHelpCombo-BHQUlI4a.js";import{C as wa}from"./index-UYRHXWUs.js";import{R as Ia}from"./moment-BBTbne0X.js";import{R as Ta}from"./FileDoneOutlined-B-0rSiK_.js";import{R as Re}from"./FilterOutlined-DQCmG5q-.js";import{M as kt}from"./modalWaiting-FhgELYWI.js";const Pa=e=>{const{componentCls:t,notificationMarginEdge:o,animationMaxHeight:n}=e,l=`${t}-notice`,r=new ge("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),g=new ge("antNotificationTopFadeIn",{"0%":{top:-n,opacity:0},"100%":{top:0,opacity:1}}),d=new ge("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(n).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),u=new ge("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[l]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:g}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:d}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:r}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:o,_skip_check_:!0},[l]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:u}}}}},Oa=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],$a={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},qa=(e,t)=>{const{componentCls:o}=e;return{[`${o}-${t}`]:{[`&${o}-stack > ${o}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[$a[t]]:{value:0,_skip_check_:!0}}}}},Da=e=>{const t={};for(let o=1;o<e.notificationStackLayer;o++)t[`&:nth-last-child(${o+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},Ra=e=>{const t={};for(let o=1;o<e.notificationStackLayer;o++)t[`&:nth-last-child(${o+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},Ea=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},Da(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},Ra(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Oa.map(o=>qa(e,o)).reduce((o,n)=>Object.assign(Object.assign({},o),n),{}))},Pt=e=>{const{iconCls:t,componentCls:o,boxShadow:n,fontSizeLG:l,notificationMarginBottom:r,borderRadiusLG:g,colorSuccess:d,colorInfo:u,colorWarning:p,colorError:h,colorTextHeading:y,notificationBg:j,notificationPadding:O,notificationMarginEdge:D,notificationProgressBg:I,notificationProgressHeight:m,fontSize:S,lineHeight:f,width:T,notificationIconSize:x,colorText:$}=e,N=`${o}-notice`;return{position:"relative",marginBottom:r,marginInlineStart:"auto",background:j,borderRadius:g,boxShadow:n,[N]:{padding:O,width:T,maxWidth:`calc(100vw - ${he(e.calc(D).mul(2).equal())})`,overflow:"hidden",lineHeight:f,wordWrap:"break-word"},[`${N}-message`]:{marginBottom:e.marginXS,color:y,fontSize:l,lineHeight:e.lineHeightLG},[`${N}-description`]:{fontSize:S,color:$},[`${N}-closable ${N}-message`]:{paddingInlineEnd:e.paddingLG},[`${N}-with-icon ${N}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(x).equal(),fontSize:l},[`${N}-with-icon ${N}-description`]:{marginInlineStart:e.calc(e.marginSM).add(x).equal(),fontSize:S},[`${N}-icon`]:{position:"absolute",fontSize:x,lineHeight:1,[`&-success${t}`]:{color:d},[`&-info${t}`]:{color:u},[`&-warning${t}`]:{color:p},[`&-error${t}`]:{color:h}},[`${N}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},ea(e)),[`${N}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${he(g)} * 2)`,left:{_skip_check_:!0,value:g},right:{_skip_check_:!0,value:g},bottom:0,blockSize:m,border:0,"&, &::-webkit-progress-bar":{borderRadius:g,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:I},"&::-webkit-progress-value":{borderRadius:g,background:I}},[`${N}-btn`]:{float:"right",marginTop:e.marginSM}}},Ma=e=>{const{componentCls:t,notificationMarginBottom:o,notificationMarginEdge:n,motionDurationMid:l,motionEaseInOut:r}=e,g=`${t}-notice`,d=new ge("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:o},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},ta(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:n,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:r,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:r,animationFillMode:"both",animationDuration:l,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:d,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${g}-btn`]:{float:"left"}}})},{[t]:{[`${g}-wrapper`]:Object.assign({},Pt(e))}}]},Ot=e=>({zIndexPopup:e.zIndexPopupBase+aa+50,width:384}),$t=e=>{const t=e.paddingMD,o=e.paddingLG;return sa(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:o,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${he(e.paddingMD)} ${he(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},qt=Zt("Notification",e=>{const t=$t(e);return[Ma(t),Pa(t),Ea(t)]},Ot),Aa=na(["Notification","PurePanel"],e=>{const t=`${e.componentCls}-notice`,o=$t(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},Pt(o)),{width:o.width,maxWidth:`calc(100vw - ${he(e.calc(o.notificationMarginEdge).mul(2).equal())})`,margin:0})}},Ot);var Ua=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]]);return o};function He(e,t){return t===null||t===!1?null:t||s.createElement(la,{className:`${e}-close-icon`})}const Ba={success:ia,info:ca,error:ra,warning:da},Dt=e=>{const{prefixCls:t,icon:o,type:n,message:l,description:r,btn:g,role:d="alert"}=e;let u=null;return o?u=s.createElement("span",{className:`${t}-icon`},o):n&&(u=s.createElement(Ba[n]||null,{className:Z(`${t}-icon`,`${t}-icon-${n}`)})),s.createElement("div",{className:Z({[`${t}-with-icon`]:u}),role:d},u,s.createElement("div",{className:`${t}-message`},l),s.createElement("div",{className:`${t}-description`},r),g&&s.createElement("div",{className:`${t}-btn`},g))},Fa=e=>{const{prefixCls:t,className:o,icon:n,type:l,message:r,description:g,btn:d,closable:u=!0,closeIcon:p,className:h}=e,y=Ua(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:j}=s.useContext(_e),O=t||j("notification"),D=`${O}-notice`,I=wt(O),[m,S,f]=qt(O,I);return m(s.createElement("div",{className:Z(`${D}-pure-panel`,S,o,f,I)},s.createElement(Aa,{prefixCls:O}),s.createElement(oa,Object.assign({},y,{prefixCls:O,eventKey:"pure",duration:null,closable:u,className:Z({notificationClassName:h}),closeIcon:He(O,p),content:s.createElement(Dt,{prefixCls:D,icon:n,type:l,message:r,description:g,btn:d})}))))};function za(e,t,o){let n;switch(e){case"top":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":n={left:0,top:t,bottom:"auto"};break;case"topRight":n={right:0,top:t,bottom:"auto"};break;case"bottom":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:o};break;case"bottomLeft":n={left:0,top:"auto",bottom:o};break;default:n={right:0,top:"auto",bottom:o};break}return n}function _a(e){return{motionName:`${e}-fade`}}var La=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]]);return o};const vt=24,Ha=4.5,Wa="topRight",Ga=e=>{let{children:t,prefixCls:o}=e;const n=wt(o),[l,r,g]=qt(o,n);return l(E.createElement(pa,{classNames:{list:Z(r,g,n)}},t))},Va=(e,t)=>{let{prefixCls:o,key:n}=t;return E.createElement(Ga,{prefixCls:o,key:n},e)},Qa=E.forwardRef((e,t)=>{const{top:o,bottom:n,prefixCls:l,getContainer:r,maxCount:g,rtl:d,onAllRemoved:u,stack:p,duration:h,pauseOnHover:y=!0,showProgress:j}=e,{getPrefixCls:O,getPopupContainer:D,notification:I,direction:m}=s.useContext(_e),[,S]=ua(),f=l||O("notification"),T=b=>za(b,o??vt,n??vt),x=()=>Z({[`${f}-rtl`]:d??m==="rtl"}),$=()=>_a(f),[N,k]=ma({prefixCls:f,style:T,className:x,motion:$,closable:!0,closeIcon:He(f),duration:h??Ha,getContainer:()=>(r==null?void 0:r())||(D==null?void 0:D())||document.body,maxCount:g,pauseOnHover:y,showProgress:j,onAllRemoved:u,renderNotifications:Va,stack:p===!1?!1:{threshold:typeof p=="object"?p==null?void 0:p.threshold:void 0,offset:8,gap:S.margin}});return E.useImperativeHandle(t,()=>Object.assign(Object.assign({},N),{prefixCls:f,notification:I})),k});function Rt(e){const t=E.useRef(null);return fa(),[E.useMemo(()=>{const n=d=>{var u;if(!t.current)return;const{open:p,prefixCls:h,notification:y}=t.current,j=`${h}-notice`,{message:O,description:D,icon:I,type:m,btn:S,className:f,style:T,role:x="alert",closeIcon:$,closable:N}=d,k=La(d,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),b=He(j,typeof $<"u"?$:y==null?void 0:y.closeIcon);return p(Object.assign(Object.assign({placement:(u=e==null?void 0:e.placement)!==null&&u!==void 0?u:Wa},k),{content:E.createElement(Dt,{prefixCls:j,icon:I,type:m,message:O,description:D,btn:S,role:x}),className:Z(m&&`${j}-${m}`,f,y==null?void 0:y.className),style:Object.assign(Object.assign({},y==null?void 0:y.style),T),closeIcon:b,closable:N??!!b}))},r={open:n,destroy:d=>{var u,p;d!==void 0?(u=t.current)===null||u===void 0||u.close(d):(p=t.current)===null||p===void 0||p.destroy()}};return["success","info","warning","error"].forEach(d=>{r[d]=u=>n(Object.assign(Object.assign({},u),{type:d}))}),r},[]),E.createElement(Qa,Object.assign({key:"notification-holder"},e,{ref:t}))]}function Ka(e){return Rt(e)}let H=null,Pe=e=>e(),Oe=[],xe={};function jt(){const{getContainer:e,rtl:t,maxCount:o,top:n,bottom:l,showProgress:r,pauseOnHover:g}=xe,d=(e==null?void 0:e())||document.body;return{getContainer:()=>d,rtl:t,maxCount:o,top:n,bottom:l,showProgress:r,pauseOnHover:g}}const Ya=E.forwardRef((e,t)=>{const{notificationConfig:o,sync:n}=e,{getPrefixCls:l}=s.useContext(_e),r=xe.prefixCls||l("notification"),g=s.useContext(Sa),[d,u]=Rt(Object.assign(Object.assign(Object.assign({},o),{prefixCls:r}),g.notification));return E.useEffect(n,[]),E.useImperativeHandle(t,()=>{const p=Object.assign({},d);return Object.keys(p).forEach(h=>{p[h]=function(){return n(),d[h].apply(d,arguments)}}),{instance:p,sync:n}}),u}),Xa=E.forwardRef((e,t)=>{const[o,n]=E.useState(jt),l=()=>{n(jt)};E.useEffect(l,[]);const r=xa(),g=r.getRootPrefixCls(),d=r.getIconPrefixCls(),u=r.getTheme(),p=E.createElement(Ya,{ref:t,sync:l,notificationConfig:o});return E.createElement(ha,{prefixCls:g,iconPrefixCls:d,theme:u},r.holderRender?r.holderRender(p):p)});function We(){if(!H){const e=document.createDocumentFragment(),t={fragment:e};H=t,Pe(()=>{ga(E.createElement(Xa,{ref:o=>{const{instance:n,sync:l}=o||{};Promise.resolve().then(()=>{!t.instance&&n&&(t.instance=n,t.sync=l,We())})}}),e)});return}H.instance&&(Oe.forEach(e=>{switch(e.type){case"open":{Pe(()=>{H.instance.open(Object.assign(Object.assign({},xe),e.config))});break}case"destroy":Pe(()=>{H==null||H.instance.destroy(e.key)});break}}),Oe=[])}function Ja(e){xe=Object.assign(Object.assign({},xe),e),Pe(()=>{var t;(t=H==null?void 0:H.sync)===null||t===void 0||t.call(H)})}function Et(e){Oe.push({type:"open",config:e}),We()}const Za=e=>{Oe.push({type:"destroy",key:e}),We()},es=["success","info","warning","error"],ts={open:Et,destroy:Za,config:Ja,useNotification:Ka,_InternalPanelDoNotUseOrYouWillBeFired:Fa},Mt=ts;es.forEach(e=>{Mt[e]=t=>Et(Object.assign(Object.assign({},t),{type:e}))});function as({formData:e,setFormData:t,setToDate:o,toDate:n,dataUnit:l,setBizUnit:r,handleSearch1:g,handleSearch2:d,handleSearch3:u,minorName:p,setFactUnit:h,setProgStatus:y,minorName2:j,setUseType:O,deptName:D,empName:I,custName:m,prodPlanNo:S,setProdPlanNo:f,setWorkOrderNo:T,workOrderNo:x,prodReqNo:$,setProdReqNo:N,outReqNo:k,setOutReqNo:b,setDeptName:v,setDeptSeq:q,resetTable:R,setEmpName:U,setEmpSeq:M,resetTable2:G,setCustSeq:B,setCustName:Q,resetTable3:Se}){const ee=c=>{t(c)},Y=c=>{o(c)},te=c=>{h(c)},Ce=c=>{y(c)},ae=c=>{O(c)},le=c=>{v(c.target.value),q(""),R()},ie=c=>{U(c.target.value),M(""),G()},ye=c=>{Q(c.target.value),B(""),Se()};return a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(z,{layout:"vertical",onKeyDown:c=>{c.key==="Enter"&&c.preventDefault()},children:a.jsxs(Ca,{className:"gap-4 flex items-center ",children:[a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Ngày yêu cầu 1"}),className:"mb-0",children:a.jsx(yt,{className:"w-full text-sm p-2",value:e,onChange:ee,format:"YYYY-MM-DD"})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Ngày yêu cầu 2"}),className:"mb-0",children:a.jsx(yt,{className:"w-full text-sm p-2",value:n,onChange:Y,format:"YYYY-MM-DD"})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Nơi sản xuất"}),className:"mb-0",children:a.jsx(J,{defaultValue:"",size:"large",style:{width:190},allowClear:!0,onChange:te,options:[{label:"All",value:""},...(l==null?void 0:l.map(c=>({label:c==null?void 0:c.AccUnitName,value:c==null?void 0:c.FactUnit})))||[]]})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Bộ phận yêu cầu"}),className:"mb-0",children:a.jsx(V,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:c=>{c.key==="Enter"&&g()},value:D,onChange:le,onDoubleClick:g})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Người yêu cầu"}),className:"mb-0",children:a.jsx(V,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:c=>{c.key==="Enter"&&d()},value:I,onChange:ie,onDoubleClick:d})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Khách hàng"}),className:"mb-0",children:a.jsx(V,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:c=>{c.key==="Enter"&&u()},value:m,onChange:ye,onDoubleClick:u})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số yêu cầu"}),className:"mb-0",children:a.jsx(V,{value:k,onChange:c=>b(c.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số kế hoạch"}),className:"mb-0",children:a.jsx(V,{value:S,onChange:c=>f(c.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số lệnh sản xuất"}),className:"mb-0",children:a.jsx(V,{value:x,onChange:c=>T(c.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số yêu cầu sản xuất"}),className:"mb-0",children:a.jsx(V,{value:$,onChange:c=>N(c.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Phân loại kho"}),className:"mb-0",children:a.jsx(J,{id:"typeSelect",defaultValue:"All",size:"large",style:{width:240},allowClear:!0,onChange:ae,options:[{label:"All",value:""},...(j==null?void 0:j.map(c=>({label:c==null?void 0:c.MinorName,value:c==null?void 0:c.Value})))||[]]})})}),a.jsx(L,{children:a.jsx(z.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Trạng thái"}),className:"mb-0",children:a.jsx(J,{id:"typeSelect",defaultValue:"All",size:"large",style:{width:240},allowClear:!0,onChange:Ce,options:[{label:"All",value:""},...(p==null?void 0:p.map(c=>({label:c==null?void 0:c.MinorName,value:c==null?void 0:c.Value})))||[]]})})})]})})})}function ss({nextPage:e,debouncedFetchSPDMMOutReqListQueryWeb:t}){return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(W,{type:"default",icon:a.jsx(Ta,{}),size:"middle",className:"uppercase",color:"default",variant:"filled",onClick:e,style:{backgroundColor:"#f0f0f0",borderColor:"#d9d9d9"},children:"XỬ LÝ XUẤT KHO"},"Reset"),a.jsx(W,{type:"primary",icon:a.jsx($e,{}),size:"middle",onClick:t,className:"uppercase",children:"SEARCH"},"Save")]})}function ns({data:e,onCellClicked:t,gridData:o,setGridData:n,loading:l}){const[r,g]=s.useState(!1),d=s.useCallback(()=>g(!1),[]);s.useState([!1,!1,!1]);const[u,p]=s.useState({columns:F.empty(),rows:F.empty()}),h=s.useMemo(()=>[{title:"IsStop"},{title:"IsConfirm"},{title:"FactUnitName"},{title:"ReqDate"},{title:"OutReqNo"},{title:"DeptName"},{title:"EmpName"},{title:"CustName"},{title:"UseTypeName"},{title:"WorkOrderNo"},{title:"AssyItemName"},{title:"AssyItemNo"},{title:"AssyItemSpec"},{title:"AssyUnitName"},{title:"ProcName"},{title:"AssyQty"},{title:"AssyProgQty"},{title:"ItemName"},{title:"ItemNo"},{title:"ItemSpec"},{title:"UnitName"},{title:"Qty"},{title:"ProgQty"},{title:"IsReturn"},{title:"Remark"},{title:"ItemSeq"},{title:"ItemUnitSeq"},{title:"AssyItemSeq"},{title:"PJTSeq"},{title:"WBSSeq"},{title:"FactUnit"},{title:"OutReqSeq"},{title:"UseType"},{title:"OSPPOSeq"},{title:"ProgStatus"},{title:"ProgStatusName"},{title:"ProdPlanNo"},{title:"ProdPlanSeq"},{title:"ProdReqNo"}],[]),[y,j]=s.useState(h),O=s.useCallback((S,f)=>{const T=y.indexOf(S);if(T!==-1){const x={...S,width:f},$=[...y];$.splice(T,1,x),j($)}},[y]),D=s.useCallback(([S,f])=>{const T=o[f]||{},{IsStop:x="",IsConfirm:$="",FactUnitName:N="",ReqDate:k="",OutReqNo:b="",DeptName:v="",EmpName:q="",CustName:R="",UseTypeName:U="",WorkOrderNo:M="",AssyItemName:G="",AssyItemNo:B="",AssyItemSpec:Q="",AssyUnitName:Se="",ProcName:ee="",AssyQty:Y="",AssyProgQty:te="",ItemName:Ce="",ItemNo:ae="",ItemSpec:le="",UnitName:ie="",Qty:ye="",ProgQty:c="",IsReturn:be="",Remark:ce="",ItemSeq:Ee="",ItemUnitSeq:re="",AssyItemSeq:Me="",PJTSeq:Ne="",WBSSeq:Ae="",FactUnit:ke="",OutReqSeq:ve="",UseType:de="",OSPPOSeq:Ue="",ProgStatus:je="",ProgStatusName:se="",ProdPlanNo:ue="",ProdPlanSeq:K="",ProdReqNo:me=""}=T,C=_=>_!=null?String(_):"",ne={0:{kind:i.Boolean,data:x},1:{kind:i.Boolean,data:$},2:{kind:i.Text,data:C(N)},3:{kind:i.Text,data:C(k)},4:{kind:i.Text,data:C(b)},5:{kind:i.Text,data:C(v)},6:{kind:i.Text,data:C(q)},7:{kind:i.Text,data:C(R)},8:{kind:i.Text,data:C(U)},9:{kind:i.Text,data:C(M)},10:{kind:i.Text,data:C(G)},11:{kind:i.Text,data:C(B)},12:{kind:i.Text,data:C(Q)},13:{kind:i.Text,data:C(Se)},14:{kind:i.Text,data:C(ee)},15:{kind:i.Text,data:C(Y)},16:{kind:i.Text,data:C(te)},17:{kind:i.Text,data:C(Ce)},18:{kind:i.Text,data:C(ae)},19:{kind:i.Text,data:C(le)},20:{kind:i.Text,data:C(ie)},21:{kind:i.Text,data:C(ye)},22:{kind:i.Text,data:C(c)},23:{kind:i.Boolean,data:be},24:{kind:i.Text,data:C(ce)},25:{kind:i.Text,data:C(Ee)},26:{kind:i.Text,data:C(re)},27:{kind:i.Text,data:C(Me)},28:{kind:i.Text,data:C(Ne)},29:{kind:i.Text,data:C(Ae)},30:{kind:i.Text,data:C(ke)},31:{kind:i.Text,data:C(ve)},32:{kind:i.Text,data:C(de)},33:{kind:i.Text,data:C(Ue)},34:{kind:i.Text,data:C(je)},35:{kind:i.Text,data:C(se)},36:{kind:i.Text,data:C(ue)},37:{kind:i.Text,data:C(K)},38:{kind:i.Text,data:C(me)}};if(ne.hasOwnProperty(S)){const{kind:_,data:oe}=ne[S];return{kind:_,data:oe,displayData:oe}}return{kind:"",data:"",displayData:""}},[o]),[I,m]=s.useState(void 0);return s.useCallback(S=>{console.log("cell",S),m(S)},[]),s.useEffect(()=>{n(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8  overflow-hidden",children:a.jsxs("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 p-2 text-blue-600 uppercase",children:[a.jsx(Ia,{}),"DATA SHEET"]}),a.jsx(qe,{columns:y,getCellContent:D,rows:o.length,showSearch:r,getCellsForSelection:!0,onSearchClose:d,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:O,smoothScrollY:!0,smoothScrollX:!0,rowSelect:"single",onCellClicked:t,gridSelection:u,onGridSelectionChange:p,getRowThemeOverride:S=>S%2===0?void 0:{bgCell:"#FBFBFB"}})]})})}function os({data:e,onCellClicked:t,setSelection:o,selection:n}){const[l,r]=s.useState([]),[g,d]=s.useState(!1),u=s.useCallback(()=>d(!1),[]),p=s.useMemo(()=>[{title:"BeDeptName"},{title:"BeBegDate"},{title:"BeEndDate"},{title:"DeptRemark"}],[]),[h,y]=s.useState(p),j=s.useCallback((m,S)=>{const f=h.indexOf(m);if(f!==-1){const T={...m,width:S},x=[...h];x.splice(f,1,T),y(x)}},[h]),O=s.useCallback(([m,S])=>{const f=l[S]||{},{BeDeptName:T="",BeBegDate:x="",BeEndDate:$="",DeptRemark:N=""}=f,k=v=>v!=null?String(v):"",b={0:{kind:i.Text,data:k(T)},1:{kind:i.Text,data:k(x)},2:{kind:i.Text,data:k($)},3:{kind:i.Text,data:k(N)}};if(b.hasOwnProperty(m)){const{kind:v,data:q}=b[m];return{kind:v,data:q,displayData:q}}return{kind:i.Text,data:"",displayData:""}},[l]),[D,I]=s.useState(void 0);return s.useCallback(m=>{I(m)},[]),s.useEffect(()=>{r(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:a.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:a.jsx(qe,{columns:h,getCellContent:O,rows:l.length,showSearch:g,getCellsForSelection:!0,onSearchClose:u,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:j,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:t,rowSelect:"single",gridSelection:n,onGridSelectionChange:o})})})}const{Search:ls}=V;function is({setConditionSeq:e,data:t,modalVisible:o,setModalVisible:n,fetchCodehelpData1:l,handleSearch:r,setSubConditionSql:g,setDeptName:d,setDeptSeq:u,deptName:p,selection:h,setSelection:y,resetTable:j}){const[O,D]=s.useState(!1),[I,m]=s.useState(null),[S,f]=s.useState(null);s.useState(null);const T=b=>{e(b)},x=b=>{g(b)},$=(b,v)=>{let q;if(b[0]!==-1){console.log("onCellClicked");return}if(b[0]===-1?(q=b[1],D(!0)):(q=b[0],D(!1)),I&&I[0]===b[0]&&I[1]===b[1]){d(""),u(""),m(null),f(null);return}if(q>=0&&q<t.length){const R=t[q];d(R==null?void 0:R.BeDeptName),u(R==null?void 0:R.BeDeptSeq),f(R),m(b)}},N=()=>{n(!1),d(""),u(""),j()},k=b=>{d(b.target.value),u(""),j()};return a.jsx("div",{children:a.jsxs(Le,{open:o,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[a.jsx(Re,{}),"Điều kiện truy vấn"]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(De,{})})]}),a.jsxs("div",{className:"flex p-2 gap-4",children:[a.jsx("div",{className:"flex flex-col",children:a.jsx(J,{id:"typeSelect",defaultValue:"Bộ phận",style:{width:120},size:"middle",onChange:T,options:[{value:1,label:"Bộ phận"},{value:0,label:"Mã bộ phận"}]})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(J,{id:"typeSelect",defaultValue:"Sử dụng",style:{width:300},size:"middle",options:[{value:"IsUse = 1",label:"Sử dụng"},{value:"IsUse = 0",label:"Chưa sử dụng"}],onChange:x})}),a.jsx("div",{className:"flex flex-col w-full",children:a.jsx(ls,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:p,onKeyDown:b=>{b.key==="Enter"&&r()},onChange:k,className:" w-full"})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(W,{type:"primary",icon:a.jsx($e,{}),size:"middle",onClick:l,children:"Truy vấn"})})]})]}),a.jsx(os,{data:t,onCellClicked:$,setSelection:y,selection:h})]}),a.jsxs("div",{className:"flex justify-end gap-4 ",children:[a.jsx(W,{onClick:N,children:"Cancel"}),a.jsx(W,{type:"primary",onClick:()=>n(!1),children:"Save"})]})]})})}function cs({data:e,onCellClicked:t,setSelection:o,selection:n}){const[l,r]=s.useState([]),[g,d]=s.useState(!1),u=s.useCallback(()=>d(!1),[]),p=s.useMemo(()=>[{title:"EmpName"},{title:"EmpID"},{title:"DeptName"},{title:"WkDeptName"},{title:"UMJoName"},{title:"PosName"},{title:"UMJpName"},{title:"UMJdName"},{title:"TypeName"},{title:"SMSexName"}],[]),[h,y]=s.useState(p),j=s.useCallback((m,S)=>{const f=h.indexOf(m);if(f!==-1){const T={...m,width:S},x=[...h];x.splice(f,1,T),y(x)}},[h]),O=s.useCallback(([m,S])=>{const f=l[S]||{},{EmpName:T="",EmpID:x="",DeptName:$="",WkDeptName:N="",UMJoName:k="",PosName:b="",UMJpName:v="",UMJdName:q="",TypeName:R="",SMSexName:U=""}=f,M=B=>B!=null?String(B):"",G={0:{kind:i.Text,data:M(T)},1:{kind:i.Text,data:M(x)},2:{kind:i.Text,data:M($)},3:{kind:i.Text,data:M(N)},4:{kind:i.Text,data:M(k)},5:{kind:i.Text,data:M(b)},6:{kind:i.Text,data:M(v)},7:{kind:i.Text,data:M(q)},8:{kind:i.Text,data:M(R)},9:{kind:i.Text,data:M(U)}};if(G.hasOwnProperty(m)){const{kind:B,data:Q}=G[m];return{kind:B,data:Q,displayData:Q}}return{kind:i.Text,data:"",displayData:""}},[l]),[D,I]=s.useState(void 0);return s.useCallback(m=>{console.log("cell",m),I(m)},[]),s.useEffect(()=>{r(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:a.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:a.jsx(qe,{columns:h,getCellContent:O,rows:l.length,showSearch:g,getCellsForSelection:!0,onSearchClose:u,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:j,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:t,rowSelect:"multi",gridSelection:n,onGridSelectionChange:o})})})}const{Search:rs}=V;function ds({setConditionSeq:e,data:t,modalVisible:o,setModalVisible:n,empName:l,handleSearch:r,setSubConditionSql:g,fetchCodehelpData2:d,setEmpSeq:u,setEmpName:p,setSelection:h,selection:y,resetTable:j}){const[O,D]=s.useState(!1),[I,m]=s.useState(null),[S,f]=s.useState(null);s.useState(null);const T=k=>{e(k)},x=(k,b)=>{let v;if(k[0]===-1){if(k[0]===-1?(v=k[1],D(!0)):(v=k[0],D(!1)),I&&I[0]===k[0]&&I[1]===k[1]){p(""),u(""),m(null),f(null);return}if(v>=0&&v<t.length){const q=t[v];p(q==null?void 0:q.EmpName),u(q==null?void 0:q.EmpSeq),f(q),m(k)}}},$=()=>{n(!1),p(""),u(""),j()},N=k=>{p(k.target.value),u(""),j()};return a.jsx("div",{children:a.jsxs(Le,{open:o,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[a.jsx(Re,{}),"Điều kiện truy vấn"]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(De,{})})]}),a.jsxs("div",{className:"flex p-2 gap-4",children:[a.jsx("div",{className:"flex flex-col",children:a.jsx(J,{id:"typeSelect",defaultValue:"Nhân viên",style:{width:180},size:"middle",options:[{value:1,label:"Nhân viên"},{value:2,label:"Mã nhân viên"}],onChange:T})}),a.jsx("div",{className:"flex flex-col w-full",children:a.jsx(rs,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:l,onKeyDown:k=>{k.key==="Enter"&&r()},onChange:N,className:" w-full"})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(W,{type:"primary",icon:a.jsx($e,{}),size:"middle",onClick:d,children:"Truy vấn"})})]})]}),a.jsx(cs,{data:t,onCellClicked:x,setSelection:h,selection:y})]}),a.jsxs("div",{className:"flex justify-end gap-4 ",children:[a.jsx(W,{onClick:$,children:"Cancel"}),a.jsx(W,{type:"primary",onClick:()=>n(!1),children:"Save"})]})]})})}function us({data:e,onCellClicked:t,selection:o,setSelection:n}){const[l,r]=s.useState([]),[g,d]=s.useState(!1),u=s.useCallback(()=>d(!1),[]),p=s.useMemo(()=>[{title:"CustSeq"},{title:"FullName"},{title:"CustNo"},{title:"BizNo"},{title:"UMCustClassName"}],[]),[h,y]=s.useState(p),j=s.useCallback((m,S)=>{const f=h.indexOf(m);if(f!==-1){const T={...m,width:S},x=[...h];x.splice(f,1,T),y(x)}},[h]),O=s.useCallback(([m,S])=>{const f=l[S]||{},{CustSeq:T="",FullName:x="",CustNo:$="",BizNo:N="",UMCustClassName:k=""}=f,b=q=>q!=null?String(q):"",v={0:{kind:i.Text,data:b(T)},1:{kind:i.Text,data:b(x)},2:{kind:i.Text,data:b($)},3:{kind:i.Text,data:b(N)},4:{kind:i.Text,data:b(k)}};if(v.hasOwnProperty(m)){const{kind:q,data:R}=v[m];return{kind:q,data:R,displayData:R}}return{kind:i.Text,data:"",displayData:""}},[l]),[D,I]=s.useState(void 0);return s.useCallback(m=>{console.log("cell",m),I(m)},[]),s.useEffect(()=>{r(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:a.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:a.jsx(qe,{columns:h,getCellContent:O,rows:l.length,showSearch:g,getCellsForSelection:!0,onSearchClose:u,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:j,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:t,rowSelect:"multi",gridSelection:o,onGridSelectionChange:n})})})}const{Search:ms}=V;function ps({setConditionSeq:e,data:t,modalVisible:o,setModalVisible:n,setKeyword:l,keyword:r,handleSearch:g,setSubConditionSql:d,fetchCodehelpData3:u,setCustSeq:p,setCustName:h,custName:y,resetTable:j,setSelection:O,selection:D}){const[I,m]=s.useState(!1),[S,f]=s.useState(null),[T,x]=s.useState(null);s.useState(null);const $=v=>{e(v)},N=(v,q)=>{let R;if(v[0]===-1){if(v[0]===-1?(R=v[1],m(!0)):(R=v[0],m(!1)),S&&S[0]===v[0]&&S[1]===v[1]){h(""),p(""),f(null),x(null);return}if(R>=0&&R<t.length){const U=t[R];h(U==null?void 0:U.FullName),p(U==null?void 0:U.CustSeq),x(U),f(v)}}},k=()=>{n(!1),h(""),p(""),j()},b=v=>{h(v.target.value),p(""),j()};return a.jsx("div",{children:a.jsxs(Le,{open:o,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[a.jsx(Re,{}),"Điều kiện truy vấn"]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(De,{})})]}),a.jsxs("div",{className:"flex p-2 gap-4",children:[a.jsx("div",{className:"flex flex-col",children:a.jsx(J,{id:"typeSelect",defaultValue:"Điểm gia công bên ngoài",style:{width:220},size:"middle",options:[{value:1,label:"Điểm gia công bên ngoài"},{value:2,label:"Số đơn vị gia công"},{value:3,label:"Mã số kinh doanh"},{value:4,label:"Tương hiệu"}],onChange:$})}),a.jsx("div",{className:"flex flex-col w-full",children:a.jsx(ms,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:y,onKeyDown:v=>{v.key==="Enter"&&g()},onChange:b,className:" w-full"})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(W,{type:"primary",icon:a.jsx($e,{}),size:"middle",onClick:u,children:"Truy vấn"})})]})]}),a.jsx(us,{data:t,onCellClicked:N,setSelection:O,selection:D})]}),a.jsxs("div",{className:"flex justify-end gap-4 ",children:[a.jsx(W,{onClick:k,children:"Cancel"}),a.jsx(W,{type:"primary",onClick:()=>n(!1),children:"Save"})]})]})})}const fs=e=>`
       <DataBlock1>
    <WorkingTag>A</WorkingTag>
    <IDX_NO>1</IDX_NO>
    <Status>0</Status>
    <DataSeq>1</DataSeq>
    <Selected>1</Selected>
    <TABLE_NAME>DataBlock1</TABLE_NAME>
    <IsChangedMst>${e.IsChangedMst}</IsChangedMst>
    <FactUnit>${e.FactUnit}</FactUnit>
    <ReqDate>${e.ReqDate}</ReqDate>
    <ReqDateTo>${e.ReqDateTo}</ReqDateTo>
    <OutReqNo>${e.OutReqNo}</OutReqNo>
    <UseType>${e.UseType}</UseType>
    <DeptSeq>${e.DeptSeq}</DeptSeq>
    <DeptName>${e.DeptName} </DeptName>
    <EmpSeq>${e.EmpSeq} </EmpSeq>
    <EmpName>${e.EmpName}</EmpName>
    <CustSeq>${e.CustSeq}</CustSeq>
    <CustName>${e.CustName}</CustName>
    <ProgStatus>${e.ProgStatus}</ProgStatus>
    <ProdPlanNo>${e.ProdPlanNo}</ProdPlanNo>
    <WorkOrderNo>${e.WorkOrderNo}</WorkOrderNo>
    <ProdReqNo>${e.ProdReqNo}</ProdReqNo>
  </DataBlock1>
    `,gs={xmlFlags:2,serviceSeq:4594,workingTag:"",companySeq:1,languageSeq:6,userSeq:3106,pgmSeq:1036085},hs=e=>{const t={...gs,...e},n={xmlDocument:fs(t),xmlFlags:t.xmlFlags,serviceSeq:t.serviceSeq,workingTag:t.workingTag,companySeq:t.companySeq,languageSeq:t.languageSeq,userSeq:t.userSeq,pgmSeq:t.pgmSeq};return It.post(`${Tt}/mssql/stock-out/sp-dmm-out-req-list`,n,{headers:{"Content-Type":"application/json"}}).then(l=>{if(l.status===200||l.status===201)return l.data;throw new Error("Error from API: "+l.data.message)}).catch(l=>{const r=l.response?l.response.data.message||"Error from API":"Unknown error occurred";throw new Error(r)})},ze=async(e,t,o,n,l,r,g,d,u,p,h,y,j,O,D,I,m,S,f,T)=>{try{const x=`${Tt}/mssql/code-help-query`,$=await It.get(x,{params:{workingTag:e,languageSeq:t,codeHelpSeq:o,companySeq:n,keyword:l,param1:r,param2:g,param3:d,param4:u,conditionSeq:p,pageCount:h,pageSize:y,subConditionSql:j,accUnit:O,bizUnit:D,factUnit:I,deptSeq:m,wkDeptSeq:S,empSeq:f,userSeq:T},headers:{"Content-Type":"application/json"}});return $.status===200?{success:!0,data:$.data.data}:{success:!1,message:bt.ERROR}}catch(x){return{success:!1,message:x.response?x.response.data.message:bt.ERROR}}},{Title:xs,Text:Is}=va;function Ts({permissions:e,isMobile:t}){const{t:o}=ya();s.useRef(null);const n=ba(),[l,r]=s.useState(!1),[g,d]=s.useState(null),[u,p]=s.useState(!1),[h,y]=s.useState([]),[j,O]=s.useState([]),[D,I]=s.useState([]),[m,S]=s.useState([]),[f,T]=s.useState(Nt().startOf("month")||""),[x,$]=s.useState(Nt()),[N,k]=s.useState(4),[b,v]=s.useState(""),[q,R]=s.useState(""),[U,M]=s.useState(""),[G,B]=s.useState(null),Q=s.useCallback(w=>w.format("YYYYMMDD"),""),[Se,ee]=s.useState(!1),[Y,te]=s.useState(null),[Ce,ae]=s.useState(null),[le,ie]=s.useState([]),[ye,c]=s.useState(!1),[be,ce]=s.useState(!1),[Ee,re]=s.useState([]),[Me,Ne]=s.useState([]),[Ae,ke]=s.useState([]),[ve,de]=s.useState(!1),[Ue,je]=s.useState(!1),[se,ue]=s.useState(!1),[K,me]=s.useState(1),[C,ne]=s.useState(1),[_,oe]=s.useState(""),[we,Ge]=s.useState(""),[At,Ve]=s.useState(""),[Qe,Ke]=s.useState(""),[Ut,Ye]=s.useState(""),[Bt,Xe]=s.useState(""),[Je,Ze]=s.useState(""),[et,Ft]=s.useState(""),[tt,zt]=s.useState(""),[at,_t]=s.useState(""),[st,Lt]=s.useState(""),[Ht,nt]=s.useState(!1),[Wt,ot]=s.useState(!1),[lt,Ie]=s.useState(!0),[Gt,it]=s.useState({columns:F.empty(),rows:F.empty()}),[Vt,ct]=s.useState({columns:F.empty(),rows:F.empty()}),[Qt,rt]=s.useState({columns:F.empty(),rows:F.empty()}),Te=()=>{it({columns:F.empty(),rows:F.empty()})},dt=()=>{ct({columns:F.empty(),rows:F.empty()})},ut=()=>{rt({columns:F.empty(),rows:F.empty()})};s.useEffect(()=>{const w=localStorage.getItem("detailsStateStockOut");c(w==="open")},[]);const mt=async()=>{if(lt===!1){fe.warning("Không thể thực hiện, vui lòng kiểm tra trạng thái.");return}Ie(!1),d(!0);const w=fe.loading("Đang tải dữ liệu, vui lòng chờ...",0);try{const X={IsChangedMst:"1",FactUnit:b,ReqDate:f?Q(f):"",ReqDateTo:x?Q(x):"",OutReqNo:st,UseType:U,DeptName:"",DeptSeq:At,EmpSeq:Ut,EmpName:"",CustSeq:Bt,CustName:"",ProgStatus:q,ProdPlanNo:et,WorkOrderNo:tt,ProdReqNo:at},A=await hs(X);if(A!=null&&A.success){fe.success("Tải dữ liệu thành công!");const P=(A==null?void 0:A.data)||[];y(P),Ie(!0),w()}else y([]),fe.error("Có lỗi xảy ra khi tải dữ liệu.")}catch{p(!0),Ie(!0),w(),Mt.destroy(),fe.error("Có lỗi xảy ra khi tải dữ liệu.")}finally{Ie(!0),d(!1)}},pt=s.useCallback(async()=>{r(!0);try{const w=await ze("Q",6,10010,1,we,"","","","",K,1,1e5,C,"1",0,0,0,0,0,18770);re((w==null?void 0:w.data)||[])}catch{re([])}finally{r(!1)}},[K,C,we]),ft=s.useCallback(async()=>{r(!0);try{const w=await ze("Q",6,10009,1,_,"","","","",K,1,1e5,C,"1",0,0,0,0,0,18770);Ne((w==null?void 0:w.data)||[])}catch{Ne([])}finally{r(!1)}},[K,C,_]),gt=s.useCallback(async()=>{r(!0);try{const w=await ze("Q",6,17071,1,_,"","","","",K,1,1e5,"SMCustStatus=2004001","1",0,0,0,0,0,18770);ke((w==null?void 0:w.data)||[])}catch{ke([])}finally{r(!1)}},[K,C,_]),ht=s.useCallback(async()=>{r(!0);try{const[w,X,A]=await Promise.all([Fe("",6,60001,1,"%","","","",""),Fe("",6,19998,1,"%","6036","","",""),Fe("",6,19998,1,"%","6044","","","")]);O((w==null?void 0:w.data)||[]),I((X==null?void 0:X.data)||[]),S((A==null?void 0:A.data)||[])}catch{O([]),I([])}finally{r(!1)}},[]),Be=s.useMemo(()=>Na.debounce(ht,100),[ht]),Kt=s.useCallback(()=>{G&&n(`/u/warehouse/material/stock-out-request/${G}`)},[G,n]),Yt=(w,X)=>{let A;if(w[0]===-1){if(w[0]===-1?(A=w[1],ee(!0)):(A=w[0],ee(!1)),Y&&Y[0]===w[0]&&Y[1]===w[1]){B(null),te(null),ae(null);return}if(A>=0&&A<h.length){const P=h[A],pe={IDX_NO:P.IDX_NO,EmpName:P.EmpName,FactUnit:P.FactUnit,FactUnitName:P.FactUnitName,IsConfirm:P.IsConfirm,IsReturn:P.IsReturn,IsStop:P.IsStop,ItemName:P.ItemName,ItemNo:P.ItemNo,ItemSeq:P.ItemSeq,ItemSpec:P.ItemSpec,ItemUnitSeq:P.ItemUnitSeq,OSPPOSeq:P.OSPPOSeq,OutReqNo:P.OutReqNo,OutReqSeq:P.OutReqSeq,PJTSeq:P.PJTSeq,ProdPlanSeq:P.ProdPlanSeq,ProdReqNo:P.ProdReqNo,ProgQty:P.ProgQty,ProgStatus:P.ProgStatus,ProgStatusName:P.ProgStatusName,Qty:P.Qty,Remark:P.Remark,ReqDate:P.ReqDate,UnitName:P.UnitName,UseType:P.UseType,UseTypeName:P.UseTypeName,WBSSeq:P.WBSSeq,WorkOrderNo:P.WorkOrderNo},Xt=wa.AES.encrypt(JSON.stringify(pe),"TEST_ACCESS_KEY").toString();if(lt===!0)if(pe.IsStop===!0||pe.IsConfirm===!1)pe.IsStop===!0&&nt(!0),pe.IsConfirm===!1&&ot(!0),B(null);else{const Jt=ja(Xt);B(Jt),ae(P),te(w)}}}},xt=async()=>{ue(!0),ce(!0),pt()},St=async()=>{ue(!0),de(!0),ft()},Ct=async()=>{ue(!0),je(!0),gt()};return s.useEffect(()=>(Be(),()=>{Be.cancel()}),[Be]),s.useEffect(()=>{mt()},[]),a.jsxs(a.Fragment,{children:[a.jsx(ka,{children:a.jsxs("title",{children:["ITM - ",o("Stock Out Request")]})}),a.jsx("div",{className:"bg-slate-50 p-3 h-screen overflow-hidden",children:a.jsxs("div",{className:"flex flex-col gap-4 md:grid md:grid-cols-4 md:grid-rows-[auto_1fr] md:gap-4 h-full",children:[a.jsxs("div",{className:"col-start-1 col-end-5 row-start-1 w-full rounded-lg ",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(xs,{level:4,className:"mt-2 uppercase opacity-85 ",children:o("Stock Out Request")}),a.jsx(ss,{nextPage:Kt,debouncedFetchSPDMMOutReqListQueryWeb:mt})]}),a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600 uppercase",children:[a.jsx(Re,{}),o("Điều kiện truy vấn")]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(De,{})})]}),a.jsx("div",{className:"flex p-2 gap-4",children:a.jsx(as,{formData:f,setFormData:T,setToDate:$,toDate:x,dataUnit:j,setBizUnit:k,deptName:we,setDeptName:Ge,setDeptSeq:Ve,handleSearch1:xt,handleSearch2:St,handleSearch3:Ct,setModalVisible1:ce,setModalVisible2:de,loadingCodeHelp:se,modalVisible1:be,modalVisible2:ve,setMinorName:I,minorName:D,setFactUnit:v,setProgStatus:R,minorName2:m,setUseType:M,empName:Qe,custName:Je,setProdPlanNo:Ft,prodPlanNo:et,setWorkOrderNo:zt,workOrderNo:tt,setProdReqNo:_t,prodReqNo:at,setOutReqNo:Lt,outReqNo:st,resetTable:Te,setEmpName:Ke,setEmpSeq:Ye,resetTable2:dt,resetTable3:ut,setCustName:Ze,setCustSeq:Xe})})]})]}),a.jsx("div",{className:"col-start-1 col-end-5 row-start-2 w-full h-full rounded-lg",children:a.jsx(ns,{data:h,loading:l,setData:y,onCellClicked:Yt,setGridData:ie,gridData:le})})]})}),a.jsx(is,{setModalVisible:ce,modalVisible:be,loadingCodeHelp:se,handleSearch:xt,data:Ee,setConditionSeq:me,setSubConditionSql:ne,fetchCodehelpData1:pt,keyword:_,setKeyword:oe,setDeptSeq:Ve,setDeptName:Ge,deptName:we,setData1:re,setSelection:it,selection:Gt,resetTable:Te}),a.jsx(ds,{setModalVisible:de,modalVisible:ve,loadingCodeHelp:se,handleSearch:St,data:Me,setConditionSeq:me,setSubConditionSql:ne,fetchCodehelpData2:ft,keyword:_,setKeyword:oe,setEmpName:Ke,setEmpSeq:Ye,setSelection:ct,selection:Vt,resetTable:dt,empName:Qe}),a.jsx(ps,{setModalVisible:je,modalVisible:Ue,loadingCodeHelp:se,handleSearch:Ct,data:Ae,setConditionSeq:me,setSubConditionSql:ne,fetchCodehelpData3:gt,keyword:_,setKeyword:oe,setCustName:Ze,setCustSeq:Xe,resetTable:ut,setSelection:rt,selection:Qt,custName:Je}),a.jsx(kt,{modal2Open:Ht,setModal2Open:nt,resetTable:Te,error:"Đơn hàng đã được hoàn thành!",setKeyPath:B}),a.jsx(kt,{modal2Open:Wt,setModal2Open:ot,resetTable:Te,error:"Đơn hàng chưa được xác nhận!",setKeyPath:B})]})}export{Ts as default};
