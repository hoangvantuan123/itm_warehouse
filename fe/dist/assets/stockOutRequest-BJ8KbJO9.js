import{K as re,h as At,i as ce,k as Ft,l as zt,m as Bt,n as Ut,o as _t,r as s,p as Ue,q as ct,t as J,N as Lt,v as Ht,w as Wt,x as Vt,y as Gt,z as Qt,A as D,D as Kt,E as Yt,G as Xt,J as Jt,L as Zt,O as ea,P as ta,Q as aa,S as sa,_ as na,j as a,F as A,b as oa,C as z,I as W,B as K,R as ve,M as _e,a as dt,H as ut,U as la,V as ia,u as ra,c as ca,d as da,T as ua,e as ma}from"./index-BWNGbzMT.js";import{A as ke}from"./index-BjysB1K-.js";import{d as nt}from"./dayjs.min-BoJTjgW-.js";import{C as V,G as i,D as je,a as pa}from"./index-6AS5S1kS.js";import{D as ot,G as ze,N as fa}from"./noneData-D5XOaVuN.js";import{l as ga}from"./lodash-B79OEnJp.js";import"./moment-RJj39j5D.js";import{S as X}from"./index-Cj7EOr8Z.js";import{R as ha}from"./FileDoneOutlined-DguscKn8.js";import{R as xa}from"./TableOutlined-Dq09ekA2.js";import{R as we}from"./FilterOutlined-DLYuFGyO.js";import{E as lt}from"./constants-BUjU6TAr.js";import{R as Sa}from"./CheckCircleTwoTone-D88LPKrU.js";import"./vi-DzcY_adS.js";import"./DownOutlined-DDVFEjpU.js";const ya=e=>{const{componentCls:t,notificationMarginEdge:n,animationMaxHeight:o}=e,l=`${t}-notice`,r=new re("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),g=new re("antNotificationTopFadeIn",{"0%":{top:-o,opacity:0},"100%":{top:0,opacity:1}}),u=new re("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(o).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),h=new re("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[l]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:g}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:u}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:r}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:n,_skip_check_:!0},[l]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:h}}}}},ba=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Ca={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Na=(e,t)=>{const{componentCls:n}=e;return{[`${n}-${t}`]:{[`&${n}-stack > ${n}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[Ca[t]]:{value:0,_skip_check_:!0}}}}},va=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},ka=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},ja=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},va(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},ka(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},ba.map(n=>Na(e,n)).reduce((n,o)=>Object.assign(Object.assign({},n),o),{}))},mt=e=>{const{iconCls:t,componentCls:n,boxShadow:o,fontSizeLG:l,notificationMarginBottom:r,borderRadiusLG:g,colorSuccess:u,colorInfo:h,colorWarning:p,colorError:f,colorTextHeading:N,notificationBg:I,notificationPadding:k,notificationMarginEdge:P,notificationProgressBg:w,notificationProgressHeight:m,fontSize:b,lineHeight:y,width:x,notificationIconSize:c,colorText:j}=e,S=`${n}-notice`;return{position:"relative",marginBottom:r,marginInlineStart:"auto",background:I,borderRadius:g,boxShadow:o,[S]:{padding:k,width:x,maxWidth:`calc(100vw - ${ce(e.calc(P).mul(2).equal())})`,overflow:"hidden",lineHeight:y,wordWrap:"break-word"},[`${S}-message`]:{marginBottom:e.marginXS,color:N,fontSize:l,lineHeight:e.lineHeightLG},[`${S}-description`]:{fontSize:b,color:j},[`${S}-closable ${S}-message`]:{paddingInlineEnd:e.paddingLG},[`${S}-with-icon ${S}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(c).equal(),fontSize:l},[`${S}-with-icon ${S}-description`]:{marginInlineStart:e.calc(e.marginSM).add(c).equal(),fontSize:b},[`${S}-icon`]:{position:"absolute",fontSize:c,lineHeight:1,[`&-success${t}`]:{color:u},[`&-info${t}`]:{color:h},[`&-warning${t}`]:{color:p},[`&-error${t}`]:{color:f}},[`${S}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},Ft(e)),[`${S}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${ce(g)} * 2)`,left:{_skip_check_:!0,value:g},right:{_skip_check_:!0,value:g},bottom:0,blockSize:m,border:0,"&, &::-webkit-progress-bar":{borderRadius:g,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:w},"&::-webkit-progress-value":{borderRadius:g,background:w}},[`${S}-btn`]:{float:"right",marginTop:e.marginSM}}},wa=e=>{const{componentCls:t,notificationMarginBottom:n,notificationMarginEdge:o,motionDurationMid:l,motionEaseInOut:r}=e,g=`${t}-notice`,u=new re("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:n},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},zt(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:o,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:r,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:r,animationFillMode:"both",animationDuration:l,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:u,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${g}-btn`]:{float:"left"}}})},{[t]:{[`${g}-wrapper`]:Object.assign({},mt(e))}}]},pt=e=>({zIndexPopup:e.zIndexPopupBase+Bt+50,width:384}),ft=e=>{const t=e.paddingMD,n=e.paddingLG;return Ut(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:n,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${ce(e.paddingMD)} ${ce(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},gt=At("Notification",e=>{const t=ft(e);return[wa(t),ya(t),ja(t)]},pt),Ta=_t(["Notification","PurePanel"],e=>{const t=`${e.componentCls}-notice`,n=ft(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},mt(n)),{width:n.width,maxWidth:`calc(100vw - ${ce(e.calc(n.notificationMarginEdge).mul(2).equal())})`,margin:0})}},pt);var Ia=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(n[o[l]]=e[o[l]]);return n};function Le(e,t){return t===null||t===!1?null:t||s.createElement(Ht,{className:`${e}-close-icon`})}const Pa={success:Wt,info:Vt,error:Gt,warning:Qt},ht=e=>{const{prefixCls:t,icon:n,type:o,message:l,description:r,btn:g,role:u="alert"}=e;let h=null;return n?h=s.createElement("span",{className:`${t}-icon`},n):o&&(h=s.createElement(Pa[o]||null,{className:J(`${t}-icon`,`${t}-icon-${o}`)})),s.createElement("div",{className:J({[`${t}-with-icon`]:h}),role:u},h,s.createElement("div",{className:`${t}-message`},l),s.createElement("div",{className:`${t}-description`},r),g&&s.createElement("div",{className:`${t}-btn`},g))},Oa=e=>{const{prefixCls:t,className:n,icon:o,type:l,message:r,description:g,btn:u,closable:h=!0,closeIcon:p,className:f}=e,N=Ia(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:I}=s.useContext(Ue),k=t||I("notification"),P=`${k}-notice`,w=ct(k),[m,b,y]=gt(k,w);return m(s.createElement("div",{className:J(`${P}-pure-panel`,b,n,y,w)},s.createElement(Ta,{prefixCls:k}),s.createElement(Lt,Object.assign({},N,{prefixCls:k,eventKey:"pure",duration:null,closable:h,className:J({notificationClassName:f}),closeIcon:Le(k,p),content:s.createElement(ht,{prefixCls:P,icon:o,type:l,message:r,description:g,btn:u})}))))};function Ra(e,t,n){let o;switch(e){case"top":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":o={left:0,top:t,bottom:"auto"};break;case"topRight":o={right:0,top:t,bottom:"auto"};break;case"bottom":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:n};break;case"bottomLeft":o={left:0,top:"auto",bottom:n};break;default:o={right:0,top:"auto",bottom:n};break}return o}function $a(e){return{motionName:`${e}-fade`}}var qa=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(n[o[l]]=e[o[l]]);return n};const it=24,Da=4.5,Ea="topRight",Ma=e=>{let{children:t,prefixCls:n}=e;const o=ct(n),[l,r,g]=gt(n,o);return l(D.createElement(Xt,{classNames:{list:J(r,g,o)}},t))},Aa=(e,t)=>{let{prefixCls:n,key:o}=t;return D.createElement(Ma,{prefixCls:n,key:o},e)},Fa=D.forwardRef((e,t)=>{const{top:n,bottom:o,prefixCls:l,getContainer:r,maxCount:g,rtl:u,onAllRemoved:h,stack:p,duration:f,pauseOnHover:N=!0,showProgress:I}=e,{getPrefixCls:k,getPopupContainer:P,notification:w,direction:m}=s.useContext(Ue),[,b]=Kt(),y=l||k("notification"),x=$=>Ra($,n??it,o??it),c=()=>J({[`${y}-rtl`]:u??m==="rtl"}),j=()=>$a(y),[S,R]=Yt({prefixCls:y,style:x,className:c,motion:j,closable:!0,closeIcon:Le(y),duration:f??Da,getContainer:()=>(r==null?void 0:r())||(P==null?void 0:P())||document.body,maxCount:g,pauseOnHover:N,showProgress:I,onAllRemoved:h,renderNotifications:Aa,stack:p===!1?!1:{threshold:typeof p=="object"?p==null?void 0:p.threshold:void 0,offset:8,gap:b.margin}});return D.useImperativeHandle(t,()=>Object.assign(Object.assign({},S),{prefixCls:y,notification:w})),R});function xt(e){const t=D.useRef(null);return Jt(),[D.useMemo(()=>{const o=u=>{var h;if(!t.current)return;const{open:p,prefixCls:f,notification:N}=t.current,I=`${f}-notice`,{message:k,description:P,icon:w,type:m,btn:b,className:y,style:x,role:c="alert",closeIcon:j,closable:S}=u,R=qa(u,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),$=Le(I,typeof j<"u"?j:N==null?void 0:N.closeIcon);return p(Object.assign(Object.assign({placement:(h=e==null?void 0:e.placement)!==null&&h!==void 0?h:Ea},R),{content:D.createElement(ht,{prefixCls:I,icon:w,type:m,message:k,description:P,btn:b,role:c}),className:J(m&&`${I}-${m}`,y,N==null?void 0:N.className),style:Object.assign(Object.assign({},N==null?void 0:N.style),x),closeIcon:$,closable:S??!!$}))},r={open:o,destroy:u=>{var h,p;u!==void 0?(h=t.current)===null||h===void 0||h.close(u):(p=t.current)===null||p===void 0||p.destroy()}};return["success","info","warning","error"].forEach(u=>{r[u]=h=>o(Object.assign(Object.assign({},h),{type:u}))}),r},[]),D.createElement(Fa,Object.assign({key:"notification-holder"},e,{ref:t}))]}function za(e){return xt(e)}let L=null,Ce=e=>e(),Ne=[],de={};function rt(){const{getContainer:e,rtl:t,maxCount:n,top:o,bottom:l,showProgress:r,pauseOnHover:g}=de,u=(e==null?void 0:e())||document.body;return{getContainer:()=>u,rtl:t,maxCount:n,top:o,bottom:l,showProgress:r,pauseOnHover:g}}const Ba=D.forwardRef((e,t)=>{const{notificationConfig:n,sync:o}=e,{getPrefixCls:l}=s.useContext(Ue),r=de.prefixCls||l("notification"),g=s.useContext(aa),[u,h]=xt(Object.assign(Object.assign(Object.assign({},n),{prefixCls:r}),g.notification));return D.useEffect(o,[]),D.useImperativeHandle(t,()=>{const p=Object.assign({},u);return Object.keys(p).forEach(f=>{p[f]=function(){return o(),u[f].apply(u,arguments)}}),{instance:p,sync:o}}),h}),Ua=D.forwardRef((e,t)=>{const[n,o]=D.useState(rt),l=()=>{o(rt)};D.useEffect(l,[]);const r=ta(),g=r.getRootPrefixCls(),u=r.getIconPrefixCls(),h=r.getTheme(),p=D.createElement(Ba,{ref:t,sync:l,notificationConfig:n});return D.createElement(ea,{prefixCls:g,iconPrefixCls:u,theme:h},r.holderRender?r.holderRender(p):p)});function He(){if(!L){const e=document.createDocumentFragment(),t={fragment:e};L=t,Ce(()=>{Zt(D.createElement(Ua,{ref:n=>{const{instance:o,sync:l}=n||{};Promise.resolve().then(()=>{!t.instance&&o&&(t.instance=o,t.sync=l,He())})}}),e)});return}L.instance&&(Ne.forEach(e=>{switch(e.type){case"open":{Ce(()=>{L.instance.open(Object.assign(Object.assign({},de),e.config))});break}case"destroy":Ce(()=>{L==null||L.instance.destroy(e.key)});break}}),Ne=[])}function _a(e){de=Object.assign(Object.assign({},de),e),Ce(()=>{var t;(t=L==null?void 0:L.sync)===null||t===void 0||t.call(L)})}function St(e){Ne.push({type:"open",config:e}),He()}const La=e=>{Ne.push({type:"destroy",key:e}),He()},Ha=["success","info","warning","error"],Wa={open:St,destroy:La,config:_a,useNotification:za,_InternalPanelDoNotUseOrYouWillBeFired:Oa},yt=Wa;Ha.forEach(e=>{yt[e]=t=>St(Object.assign(Object.assign({},t),{type:e}))});var Va={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},Ga=function(t,n){return s.createElement(sa,na({},t,{ref:n,icon:Va}))},Qa=s.forwardRef(Ga);function Ka({formData:e,setFormData:t,setToDate:n,toDate:o,dataUnit:l,setBizUnit:r,handleSearch1:g,handleSearch2:u,handleSearch3:h,minorName:p,setFactUnit:f,setProgStatus:N,minorName2:I,setUseType:k,deptName:P,empName:w,custName:m,prodPlanNo:b,setProdPlanNo:y,setWorkOrderNo:x,workOrderNo:c,prodReqNo:j,setProdReqNo:S,outReqNo:R,setOutReqNo:$,setDeptName:E,setDeptSeq:T}){const B=d=>{t(d)},M=d=>{n(d)},q=d=>{f(d)},H=d=>{N(d)},U=d=>{k(d)},G=d=>{E(d.target.value),T("")};return a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(A,{layout:"vertical",onKeyDown:d=>{d.key==="Enter"&&d.preventDefault()},children:a.jsxs(oa,{className:"gap-4 flex items-center ",children:[a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Ngày yêu cầu 1"}),className:"mb-0",children:a.jsx(ot,{className:"w-full text-sm p-2",value:e,onChange:B,format:"YYYY-MM-DD"})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Ngày yêu cầu 2"}),className:"mb-0",children:a.jsx(ot,{className:"w-full text-sm p-2",value:o,onChange:M,format:"YYYY-MM-DD"})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Nơi sản xuất"}),className:"mb-0",children:a.jsx(X,{defaultValue:"",size:"large",style:{width:190},allowClear:!0,onChange:q,options:[{label:"All",value:""},...(l==null?void 0:l.map(d=>({label:d==null?void 0:d.AccUnitName,value:d==null?void 0:d.FactUnit})))||[]]})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Bộ phận yêu cầu"}),className:"mb-0",children:a.jsx(W,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:d=>{d.key==="Enter"&&g()},value:P,onChange:G,onDoubleClick:g})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Người yêu cầu"}),className:"mb-0",children:a.jsx(W,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:d=>{d.key==="Enter"&&u()},value:w,onDoubleClick:u})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Khách hàng"}),className:"mb-0",children:a.jsx(W,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:d=>{d.key==="Enter"&&h()},value:m,onDoubleClick:h})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số yêu cầu"}),className:"mb-0",children:a.jsx(W,{value:R,onChange:d=>$(d.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số kế hoạch"}),className:"mb-0",children:a.jsx(W,{value:b,onChange:d=>y(d.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số lệnh sản xuất"}),className:"mb-0",children:a.jsx(W,{value:c,onChange:d=>x(d.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Số yêu cầu sản xuất"}),className:"mb-0",children:a.jsx(W,{value:j,onChange:d=>S(d.target.value),size:"small",className:" text-sm p-2"})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Phân loại kho"}),className:"mb-0",children:a.jsx(X,{id:"typeSelect",defaultValue:"All",size:"large",style:{width:240},allowClear:!0,onChange:U,options:[{label:"All",value:""},...(I==null?void 0:I.map(d=>({label:d==null?void 0:d.MinorName,value:d==null?void 0:d.Value})))||[]]})})}),a.jsx(z,{children:a.jsx(A.Item,{label:a.jsx("span",{className:"uppercase text-[10px]",children:"Trạng thái"}),className:"mb-0",children:a.jsx(X,{id:"typeSelect",defaultValue:"All",size:"large",style:{width:240},allowClear:!0,onChange:H,options:[{label:"All",value:""},...(p==null?void 0:p.map(d=>({label:d==null?void 0:d.MinorName,value:d==null?void 0:d.Value})))||[]]})})})]})})})}function Ya({nextPage:e,debouncedFetchSPDMMOutReqListQueryWeb:t}){return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(K,{type:"default",icon:a.jsx(ha,{}),size:"middle",className:"uppercase",color:"default",variant:"filled",onClick:e,style:{backgroundColor:"#f0f0f0",borderColor:"#d9d9d9"},children:"XỬ LÝ XUẤT KHO"},"Reset"),a.jsx(K,{type:"primary",icon:a.jsx(ve,{}),size:"middle",onClick:t,className:"uppercase",children:"SEARCH"},"Save")]})}function Xa({data:e,onCellClicked:t,gridData:n,setGridData:o,loading:l}){const[r,g]=s.useState(!1),u=s.useCallback(()=>g(!1),[]);s.useState([!1,!1,!1]);const[h,p]=s.useState({columns:V.empty(),rows:V.empty()}),f=s.useMemo(()=>[{title:"IsStop"},{title:"IsConfirm"},{title:"FactUnitName"},{title:"ReqDate"},{title:"OutReqNo"},{title:"DeptName"},{title:"EmpName"},{title:"CustName"},{title:"UseTypeName"},{title:"WorkOrderNo"},{title:"AssyItemName"},{title:"AssyItemNo"},{title:"AssyItemSpec"},{title:"AssyUnitName"},{title:"ProcName"},{title:"AssyQty"},{title:"AssyProgQty"},{title:"ItemName"},{title:"ItemNo"},{title:"ItemSpec"},{title:"UnitName"},{title:"Qty"},{title:"ProgQty"},{title:"IsReturn"},{title:"Remark"},{title:"ItemSeq"},{title:"ItemUnitSeq"},{title:"AssyItemSeq"},{title:"PJTSeq"},{title:"WBSSeq"},{title:"FactUnit"},{title:"OutReqSeq"},{title:"UseType"},{title:"OSPPOSeq"},{title:"ProgStatus"},{title:"ProgStatusName"},{title:"ProdPlanNo"},{title:"ProdPlanSeq"},{title:"ProdReqNo"}],[]),[N,I]=s.useState(f),k=s.useCallback((b,y)=>{const x=N.indexOf(b);if(x!==-1){const c={...b,width:y},j=[...N];j.splice(x,1,c),I(j)}},[N]),P=s.useCallback(([b,y])=>{const x=n[y]||{},{IsStop:c="",IsConfirm:j="",FactUnitName:S="",ReqDate:R="",OutReqNo:$="",DeptName:E="",EmpName:T="",CustName:B="",UseTypeName:M="",WorkOrderNo:q="",AssyItemName:H="",AssyItemNo:U="",AssyItemSpec:G="",AssyUnitName:d="",ProcName:ue="",AssyQty:ae="",AssyProgQty:me="",ItemName:We="",ItemNo:pe="",ItemSpec:Te="",UnitName:Ie="",Qty:Pe="",ProgQty:fe="",IsReturn:ge="",Remark:se="",ItemSeq:Oe="",ItemUnitSeq:ne="",AssyItemSeq:Re="",PJTSeq:he="",WBSSeq:$e="",FactUnit:xe="",OutReqSeq:Se="",UseType:oe="",OSPPOSeq:qe="",ProgStatus:ye="",ProgStatusName:Z="",ProdPlanNo:le="",ProdPlanSeq:Y="",ProdReqNo:ie=""}=x,C=F=>F!=null?String(F):"",ee={0:{kind:i.Boolean,data:c},1:{kind:i.Boolean,data:j},2:{kind:i.Text,data:C(S)},3:{kind:i.Text,data:C(R)},4:{kind:i.Text,data:C($)},5:{kind:i.Text,data:C(E)},6:{kind:i.Text,data:C(T)},7:{kind:i.Text,data:C(B)},8:{kind:i.Text,data:C(M)},9:{kind:i.Text,data:C(q)},10:{kind:i.Text,data:C(H)},11:{kind:i.Text,data:C(U)},12:{kind:i.Text,data:C(G)},13:{kind:i.Text,data:C(d)},14:{kind:i.Text,data:C(ue)},15:{kind:i.Text,data:C(ae)},16:{kind:i.Text,data:C(me)},17:{kind:i.Text,data:C(We)},18:{kind:i.Text,data:C(pe)},19:{kind:i.Text,data:C(Te)},20:{kind:i.Text,data:C(Ie)},21:{kind:i.Text,data:C(Pe)},22:{kind:i.Text,data:C(fe)},23:{kind:i.Boolean,data:ge},24:{kind:i.Text,data:C(se)},25:{kind:i.Text,data:C(Oe)},26:{kind:i.Text,data:C(ne)},27:{kind:i.Text,data:C(Re)},28:{kind:i.Text,data:C(he)},29:{kind:i.Text,data:C($e)},30:{kind:i.Text,data:C(xe)},31:{kind:i.Text,data:C(Se)},32:{kind:i.Text,data:C(oe)},33:{kind:i.Text,data:C(qe)},34:{kind:i.Text,data:C(ye)},35:{kind:i.Text,data:C(Z)},36:{kind:i.Text,data:C(le)},37:{kind:i.Text,data:C(Y)},38:{kind:i.Text,data:C(ie)}};if(ee.hasOwnProperty(b)){const{kind:F,data:te}=ee[b];return{kind:F,data:te,displayData:te}}return{kind:"",data:"",displayData:""}},[n]),[w,m]=s.useState(void 0);return s.useCallback(b=>{console.log("cell",b),m(b)},[]),s.useEffect(()=>{o(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8  overflow-hidden",children:a.jsxs("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 p-2 text-blue-600 uppercase",children:[a.jsx(xa,{}),"DATA SHEET"]}),a.jsx(je,{columns:N,getCellContent:P,rows:n.length,showSearch:r,getCellsForSelection:!0,onSearchClose:u,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:k,smoothScrollY:!0,smoothScrollX:!0,rowSelect:"single",onCellClicked:t,gridSelection:h,onGridSelectionChange:p,getRowThemeOverride:b=>b%2===0?void 0:{bgCell:"#FBFBFB"}})]})})}function Ja({data:e,onCellClicked:t,setSelection:n,selection:o}){const[l,r]=s.useState([]),[g,u]=s.useState(!1),h=s.useCallback(()=>u(!1),[]),p=s.useMemo(()=>[{title:"BeDeptName"},{title:"BeBegDate"},{title:"BeEndDate"},{title:"DeptRemark"}],[]),[f,N]=s.useState(p),I=s.useCallback((m,b)=>{const y=f.indexOf(m);if(y!==-1){const x={...m,width:b},c=[...f];c.splice(y,1,x),N(c)}},[f]),k=s.useCallback(([m,b])=>{const y=l[b]||{},{BeDeptName:x="",BeBegDate:c="",BeEndDate:j="",DeptRemark:S=""}=y,R=E=>E!=null?String(E):"",$={0:{kind:i.Text,data:R(x)},1:{kind:i.Text,data:R(c)},2:{kind:i.Text,data:R(j)},3:{kind:i.Text,data:R(S)}};if($.hasOwnProperty(m)){const{kind:E,data:T}=$[m];return{kind:E,data:T,displayData:T}}return{kind:i.Text,data:"",displayData:""}},[l]),[P,w]=s.useState(void 0);return s.useCallback(m=>{w(m)},[]),s.useEffect(()=>{r(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:a.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:a.jsx(je,{columns:f,getCellContent:k,rows:l.length,showSearch:g,getCellsForSelection:!0,onSearchClose:h,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:I,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:t,rowSelect:"single",gridSelection:o,onGridSelectionChange:n})})})}const{Search:Za}=W;function es({setConditionSeq:e,data:t,modalVisible:n,setModalVisible:o,setKeyword:l,keyword:r,fetchCodehelpData1:g,handleSearch:u,setSubConditionSql:h,setDeptName:p,setDeptSeq:f,setData1:N,deptName:I}){const[k,P]=s.useState(!1),[w,m]=s.useState(null),[b,y]=s.useState(null),[x,c]=s.useState({columns:V.empty(),rows:V.empty()});s.useState(null);const j=T=>{e(T)},S=T=>{h(T)},R=(T,B)=>{let M;if(T[0]!==-1){console.log("onCellClicked");return}if(T[0]===-1?(M=T[1],P(!0)):(M=T[0],P(!1)),w&&w[0]===T[0]&&w[1]===T[1]){p(""),f(""),m(null),y(null);return}if(M>=0&&M<t.length){const q=t[M];p(q==null?void 0:q.BeDeptName),f(q==null?void 0:q.BeDeptSeq),y(q),m(T)}},$=()=>{c({columns:V.empty(),rows:V.empty()})},E=()=>{o(!1),p(""),f(""),$()};return a.jsx("div",{children:a.jsxs(_e,{open:n,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[a.jsx(we,{}),"Điều kiện truy vấn"]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(ke,{})})]}),a.jsxs("div",{className:"flex p-2 gap-4",children:[a.jsx("div",{className:"flex flex-col",children:a.jsx(X,{id:"typeSelect",defaultValue:"Bộ phận",style:{width:120},size:"middle",onChange:j,options:[{value:1,label:"Bộ phận"},{value:0,label:"Mã bộ phận"}]})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(X,{id:"typeSelect",defaultValue:"Sử dụng",style:{width:300},size:"middle",options:[{value:"IsUse = 1",label:"Sử dụng"},{value:"IsUse = 0",label:"Chưa sử dụng"}],onChange:S})}),a.jsx("div",{className:"flex flex-col w-full",children:a.jsx(Za,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:I,onKeyDown:T=>{T.key==="Enter"&&u()},onChange:T=>p(T.target.value),className:" w-full"})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(K,{type:"primary",icon:a.jsx(ve,{}),size:"middle",onClick:g,children:"Truy vấn"})})]})]}),a.jsx(Ja,{data:t,onCellClicked:R,setSelection:c,selection:x})]}),a.jsxs("div",{className:"flex justify-end gap-4 ",children:[a.jsx(K,{onClick:E,children:"Cancel"}),a.jsx(K,{type:"primary",onClick:()=>o(!1),children:"Save"})]})]})})}function ts({data:e,onCellClicked:t}){const[n,o]=s.useState([]),[l,r]=s.useState(!1),g=s.useCallback(()=>r(!1),[]),[u,h]=s.useState({columns:V.empty(),rows:V.empty()}),p=s.useMemo(()=>[{title:"EmpName"},{title:"EmpID"},{title:"DeptName"},{title:"WkDeptName"},{title:"UMJoName"},{title:"PosName"},{title:"UMJpName"},{title:"UMJdName"},{title:"TypeName"},{title:"SMSexName"}],[]),[f,N]=s.useState(p),I=s.useCallback((m,b)=>{const y=f.indexOf(m);if(y!==-1){const x={...m,width:b},c=[...f];c.splice(y,1,x),N(c)}},[f]),k=s.useCallback(([m,b])=>{const y=n[b]||{},{EmpName:x="",EmpID:c="",DeptName:j="",WkDeptName:S="",UMJoName:R="",PosName:$="",UMJpName:E="",UMJdName:T="",TypeName:B="",SMSexName:M=""}=y,q=U=>U!=null?String(U):"",H={0:{kind:i.Text,data:q(x)},1:{kind:i.Text,data:q(c)},2:{kind:i.Text,data:q(j)},3:{kind:i.Text,data:q(S)},4:{kind:i.Text,data:q(R)},5:{kind:i.Text,data:q($)},6:{kind:i.Text,data:q(E)},7:{kind:i.Text,data:q(T)},8:{kind:i.Text,data:q(B)},9:{kind:i.Text,data:q(M)}};if(H.hasOwnProperty(m)){const{kind:U,data:G}=H[m];return{kind:U,data:G,displayData:G}}return{kind:i.Text,data:"",displayData:""}},[n]),[P,w]=s.useState(void 0);return s.useCallback(m=>{console.log("cell",m),w(m)},[]),s.useEffect(()=>{o(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:a.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:a.jsx(je,{columns:f,getCellContent:k,rows:n.length,showSearch:l,getCellsForSelection:!0,onSearchClose:g,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:I,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:t,rowSelect:"multi",gridSelection:u,onGridSelectionChange:h})})})}const{Search:as}=W;function ss({setConditionSeq:e,data:t,modalVisible:n,setModalVisible:o,setKeyword:l,keyword:r,loadingCodeHelp:g,handleSearch:u,setSubConditionSql:h,fetchCodehelpData2:p,setEmpSeq:f,setEmpName:N}){const[I,k]=s.useState(!1),[P,w]=s.useState(null),[m,b]=s.useState(null);s.useState(null);const y=c=>{e(c)},x=(c,j)=>{let S;if(c[0]===-1){if(c[0]===-1?(S=c[1],k(!0)):(S=c[0],k(!1)),P&&P[0]===c[0]&&P[1]===c[1]){N(""),f(""),w(null),b(null);return}if(S>=0&&S<t.length){const R=t[S];N(R==null?void 0:R.EmpName),f(R==null?void 0:R.EmpSeq),b(R),w(c)}}};return a.jsx("div",{children:a.jsxs(_e,{open:n,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[a.jsx(we,{}),"Điều kiện truy vấn"]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(ke,{})})]}),a.jsxs("div",{className:"flex p-2 gap-4",children:[a.jsx("div",{className:"flex flex-col",children:a.jsx(X,{id:"typeSelect",defaultValue:"Nhân viên",style:{width:180},size:"middle",options:[{value:1,label:"Nhân viên"},{value:2,label:"Mã nhân viên"}],onChange:y})}),a.jsx("div",{className:"flex flex-col w-full",children:a.jsx(as,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:r,onKeyDown:c=>{c.key==="Enter"&&u()},onChange:c=>l(c.target.value),className:" w-full"})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(K,{type:"primary",icon:a.jsx(ve,{}),size:"middle",onClick:p,children:"Truy vấn"})})]})]}),a.jsx(ts,{data:t,onCellClicked:x})]}),a.jsx("div",{className:"flex justify-end ",children:a.jsx(K,{type:"primary",onClick:()=>o(!1),children:"Save"})})]})})}function ns({data:e,onCellClicked:t}){const[n,o]=s.useState([]),[l,r]=s.useState(!1),g=s.useCallback(()=>r(!1),[]),[u,h]=s.useState({columns:V.empty(),rows:V.empty()}),p=s.useMemo(()=>[{title:"CustSeq"},{title:"FullName"},{title:"CustNo"},{title:"BizNo"},{title:"UMCustClassName"}],[]),[f,N]=s.useState(p),I=s.useCallback((m,b)=>{const y=f.indexOf(m);if(y!==-1){const x={...m,width:b},c=[...f];c.splice(y,1,x),N(c)}},[f]),k=s.useCallback(([m,b])=>{const y=n[b]||{},{CustSeq:x="",FullName:c="",CustNo:j="",BizNo:S="",UMCustClassName:R=""}=y,$=T=>T!=null?String(T):"",E={0:{kind:i.Text,data:$(x)},1:{kind:i.Text,data:$(c)},2:{kind:i.Text,data:$(j)},3:{kind:i.Text,data:$(S)},4:{kind:i.Text,data:$(R)}};if(E.hasOwnProperty(m)){const{kind:T,data:B}=E[m];return{kind:T,data:B,displayData:B}}return{kind:i.Text,data:"",displayData:""}},[n]),[P,w]=s.useState(void 0);return s.useCallback(m=>{console.log("cell",m),w(m)},[]),s.useEffect(()=>{o(e)},[e]),a.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:a.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:a.jsx(je,{columns:f,getCellContent:k,rows:n.length,showSearch:l,getCellsForSelection:!0,onSearchClose:g,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:I,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:t,rowSelect:"multi",gridSelection:u,onGridSelectionChange:h})})})}const{Search:os}=W;function ls({setConditionSeq:e,data:t,modalVisible:n,setModalVisible:o,setKeyword:l,keyword:r,handleSearch:g,setSubConditionSql:u,fetchCodehelpData3:h,setCustSeq:p,setCustName:f}){const[N,I]=s.useState(!1),[k,P]=s.useState(null),[w,m]=s.useState(null);s.useState(null);const b=x=>{e(x)},y=(x,c)=>{let j;if(x[0]===-1){if(x[0]===-1?(j=x[1],I(!0)):(j=x[0],I(!1)),k&&k[0]===x[0]&&k[1]===x[1]){f(""),p(""),P(null),m(null);return}if(j>=0&&j<t.length){const S=t[j];f(S==null?void 0:S.FullName),p(S==null?void 0:S.CustSeq),m(S),P(x)}}};return a.jsx("div",{children:a.jsxs(_e,{open:n,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[a.jsx(we,{}),"Điều kiện truy vấn"]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(ke,{})})]}),a.jsxs("div",{className:"flex p-2 gap-4",children:[a.jsx("div",{className:"flex flex-col",children:a.jsx(X,{id:"typeSelect",defaultValue:"Điểm gia công bên ngoài",style:{width:220},size:"middle",options:[{value:1,label:"Điểm gia công bên ngoài"},{value:2,label:"Số đơn vị gia công"},{value:3,label:"Mã số kinh doanh"},{value:4,label:"Tương hiệu"}],onChange:b})}),a.jsx("div",{className:"flex flex-col w-full",children:a.jsx(os,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:r,onKeyDown:x=>{x.key==="Enter"&&g()},onChange:x=>l(x.target.value),className:" w-full"})}),a.jsx("div",{className:"flex flex-col",children:a.jsx(K,{type:"primary",icon:a.jsx(ve,{}),size:"middle",onClick:h,children:"Truy vấn"})})]})]}),a.jsx(ns,{data:t,onCellClicked:y})]}),a.jsx("div",{className:"flex justify-end ",children:a.jsx(K,{type:"primary",onClick:()=>o(!1),children:"Save"})})]})})}const is=e=>`
       <DataBlock1>
    <WorkingTag>A</WorkingTag>
    <IDX_NO>1</IDX_NO>
    <Status>0</Status>
    <DataSeq>1</DataSeq>
    <Selected>1</Selected>
    <TABLE_NAME>DataBlock1</TABLE_NAME>
    <IsChangedMst>${e.IsChangedMst}</IsChangedMst>
    <FactUnit>${e.FactUnit}</FactUnit>
    <ReqDate>${e.ReqDate}</ReqDate>
    <ReqDateTo>${e.ReqDateTo}</ReqDateTo>
    <OutReqNo>${e.OutReqNo}</OutReqNo>
    <UseType>${e.UseType}</UseType>
    <DeptSeq>${e.DeptSeq}</DeptSeq>
    <DeptName>${e.DeptName} </DeptName>
    <EmpSeq>${e.EmpSeq} </EmpSeq>
    <EmpName>${e.EmpName}</EmpName>
    <CustSeq>${e.CustSeq}</CustSeq>
    <CustName>${e.CustName}</CustName>
    <ProgStatus>${e.ProgStatus}</ProgStatus>
    <ProdPlanNo>${e.ProdPlanNo}</ProdPlanNo>
    <WorkOrderNo>${e.WorkOrderNo}</WorkOrderNo>
    <ProdReqNo>${e.ProdReqNo}</ProdReqNo>
  </DataBlock1>
    `,rs={xmlFlags:2,serviceSeq:4594,workingTag:"",companySeq:1,languageSeq:6,userSeq:3106,pgmSeq:1036085},cs=e=>{const t={...rs,...e},o={xmlDocument:is(t),xmlFlags:t.xmlFlags,serviceSeq:t.serviceSeq,workingTag:t.workingTag,companySeq:t.companySeq,languageSeq:t.languageSeq,userSeq:t.userSeq,pgmSeq:t.pgmSeq};return dt.post(`${ut}/mssql/stock-out/sp-dmm-out-req-list`,o,{headers:{"Content-Type":"application/json"}}).then(l=>{if(l.status===200||l.status===201)return l.data;throw new Error("Error from API: "+l.data.message)}).catch(l=>{const r=l.response?l.response.data.message||"Error from API":"Unknown error occurred";throw new Error(r)})},Be=async(e,t,n,o,l,r,g,u,h,p,f,N,I,k,P,w,m,b,y,x)=>{try{const c=`${ut}/mssql/code-help-query`,j=await dt.get(c,{params:{workingTag:e,languageSeq:t,codeHelpSeq:n,companySeq:o,keyword:l,param1:r,param2:g,param3:u,param4:h,conditionSeq:p,pageCount:f,pageSize:N,subConditionSql:I,accUnit:k,bizUnit:P,factUnit:w,deptSeq:m,wkDeptSeq:b,empSeq:y,userSeq:x},headers:{"Content-Type":"application/json"}});return j.status===200?{success:!0,data:j.data.data}:{success:!1,message:lt.ERROR}}catch(c){return{success:!1,message:c.response?c.response.data.message:lt.ERROR}}};D.createContext({name:"Default"});const ds=({loading:e,error:t})=>{const[n,o]=yt.useNotification(),[l,r]=s.useState(e);return s.useEffect(()=>{l?n.info({message:"Đang tải...",description:"Vui lòng đợi trong khi trang đang được tải.",placement:"bottomRight",duration:0,icon:a.jsx(la,{indicator:a.jsx(ia,{spin:!0})}),closable:!1}):n.destroy()},[l,n]),s.useEffect(()=>{t&&n.error({message:"Có lỗi xảy ra!",description:"Vui lòng thử lại sau.",placement:"bottomRight",duration:2,icon:a.jsx(Qa,{style:{color:"red"}}),closable:!1})},[t,n]),s.useEffect(()=>{!l&&!t&&n.success({message:"Thành công!",description:"Dữ liệu đã được tải thành công.",placement:"bottomRight",duration:2,icon:a.jsx(Sa,{twoToneColor:"#52c41a"}),closable:!1})},[l,t,n]),s.useEffect(()=>{r(!!e)},[e]),a.jsx(a.Fragment,{children:o})},{Title:us,Text:Is}=ua;function Ps({permissions:e,isMobile:t}){const{t:n}=ra();s.useRef(null);const o=ca(),[l,r]=s.useState(!1),[g,u]=s.useState(!1),[h,p]=s.useState(!1),[f,N]=s.useState([]),[I,k]=s.useState([]),[P,w]=s.useState([]),[m,b]=s.useState([]),[y,x]=s.useState(nt().startOf("month")),[c,j]=s.useState(nt()),[S,R]=s.useState(4),[$,E]=s.useState(""),[T,B]=s.useState(""),[M,q]=s.useState(""),[H,U]=s.useState(null),G=s.useCallback(v=>v.format("YYYYMMDD"),""),[d,ue]=s.useState(!1),[ae,me]=s.useState(null),[We,pe]=s.useState(null),[Te,Ie]=s.useState([]),[Pe,fe]=s.useState(!1),[ge,se]=s.useState(!1),[Oe,ne]=s.useState([]),[Re,he]=s.useState([]),[$e,xe]=s.useState([]),[Se,oe]=s.useState(!1),[qe,ye]=s.useState(!1),[Z,le]=s.useState(!1),[Y,ie]=s.useState(1),[C,ee]=s.useState(1),[F,te]=s.useState(""),[be,Ve]=s.useState(""),[Ge,Qe]=s.useState(""),[bt,Ct]=s.useState(""),[Ke,Nt]=s.useState(""),[Ye,vt]=s.useState(""),[kt,jt]=s.useState(""),[De,wt]=s.useState(""),[Ee,Tt]=s.useState(""),[Me,It]=s.useState(""),[Ae,Pt]=s.useState("");s.useState(!1),s.useState(0),s.useEffect(()=>{const v=localStorage.getItem("detailsStateStockOut");fe(v==="open")},[]);const Ot=v=>{const _=v.target.open;fe(_),localStorage.setItem("detailsStateStockOut",_?"open":"closed")},Rt=s.useCallback(async()=>{u(!0);try{const v={IsChangedMst:"1",FactUnit:$,ReqDate:G(y),ReqDateTo:G(c),OutReqNo:Ae,UseType:M,DeptName:"",DeptSeq:Ge,EmpSeq:Ke,EmpName:"",CustSeq:Ye,CustName:"",ProgStatus:T,ProdPlanNo:De,WorkOrderNo:Ee,ProdReqNo:Me},_=await cs(v);N((_==null?void 0:_.data)||[])}catch{p(!0)}finally{u(!1)}},[y,c,$,T,M,Ge,Ke,Ye,De,Ee,Me,Ae]),Xe=s.useCallback(async()=>{r(!0);try{const v=await Be("Q",6,10010,1,be,"","","","",Y,1,1e5,C,"1",0,0,0,0,0,18770);ne((v==null?void 0:v.data)||[])}catch{ne([])}finally{r(!1)}},[Y,C,be]),Je=s.useCallback(async()=>{r(!0);try{const v=await Be("Q",6,10009,1,F,"","","","",Y,1,1e5,C,"1",0,0,0,0,0,18770);he((v==null?void 0:v.data)||[])}catch{he([])}finally{r(!1)}},[Y,C,F]),Ze=s.useCallback(async()=>{r(!0);try{const v=await Be("Q",6,17071,1,F,"","","","",Y,1,1e5,"SMCustStatus=2004001","1",0,0,0,0,0,18770);xe((v==null?void 0:v.data)||[])}catch{xe([])}finally{r(!1)}},[Y,C,F]),et=s.useCallback(async()=>{r(!0);try{const[v,_,Q]=await Promise.all([ze("",6,60001,1,"%","","","",""),ze("",6,19998,1,"%","6036","","",""),ze("",6,19998,1,"%","6044","","","")]);k((v==null?void 0:v.data)||[]),w((_==null?void 0:_.data)||[]),b((Q==null?void 0:Q.data)||[])}catch{k([]),w([])}finally{r(!1)}},[]),Fe=s.useMemo(()=>ga.debounce(et,100),[et]),$t=s.useCallback(()=>{H&&o(`/u/warehouse/material/stock-out-request/${H}`)},[H,o]),qt=(v,_)=>{let Q;if(v[0]===-1){if(v[0]===-1?(Q=v[1],ue(!0)):(Q=v[0],ue(!1)),ae&&ae[0]===v[0]&&ae[1]===v[1]){U(null),me(null),pe(null);return}if(Q>=0&&Q<f.length){const O=f[Q],Dt={IDX_NO:O.IDX_NO,EmpName:O.EmpName,FactUnit:O.FactUnit,FactUnitName:O.FactUnitName,IsConfirm:O.IsConfirm,IsReturn:O.IsReturn,IsStop:O.IsStop,ItemName:O.ItemName,ItemNo:O.ItemNo,ItemSeq:O.ItemSeq,ItemSpec:O.ItemSpec,ItemUnitSeq:O.ItemUnitSeq,OSPPOSeq:O.OSPPOSeq,OutReqNo:O.OutReqNo,OutReqSeq:O.OutReqSeq,PJTSeq:O.PJTSeq,ProdPlanSeq:O.ProdPlanSeq,ProdReqNo:O.ProdReqNo,ProgQty:O.ProgQty,ProgStatus:O.ProgStatus,ProgStatusName:O.ProgStatusName,Qty:O.Qty,Remark:O.Remark,ReqDate:O.ReqDate,UnitName:O.UnitName,UseType:O.UseType,UseTypeName:O.UseTypeName,WBSSeq:O.WBSSeq,WorkOrderNo:O.WorkOrderNo},Et=pa.AES.encrypt(JSON.stringify(Dt),"TEST_ACCESS_KEY").toString(),Mt=ma(Et);U(Mt),pe(O),me(v)}}},tt=async()=>{le(!0),se(!0),Xe()},at=async()=>{le(!0),oe(!0),Je()},st=async()=>{le(!0),ye(!0),Ze()};return s.useEffect(()=>(Fe(),()=>{Fe.cancel()}),[Fe]),a.jsxs(a.Fragment,{children:[a.jsx(da,{children:a.jsxs("title",{children:["ITM - ",n("Stock Out Request")]})}),a.jsx("div",{className:"bg-slate-50 p-3 h-screen overflow-hidden",children:a.jsxs("div",{className:"flex flex-col gap-4 md:grid md:grid-cols-4 md:grid-rows-[auto_1fr] md:gap-4 h-full",children:[a.jsxs("div",{className:"col-start-1 col-end-5 row-start-1 w-full rounded-lg ",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(us,{level:4,className:"mt-2 uppercase opacity-85 ",children:n("Stock Out Request")}),a.jsx(Ya,{nextPage:$t,debouncedFetchSPDMMOutReqListQueryWeb:Rt})]}),a.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:Pe,onToggle:Ot,children:[a.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[a.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600 uppercase",children:[a.jsx(we,{}),n("Điều kiện truy vấn")]}),a.jsx("span",{className:"relative size-5 shrink-0",children:a.jsx(ke,{})})]}),a.jsx("div",{className:"flex p-2 gap-4",children:a.jsx(Ka,{formData:y,setFormData:x,setToDate:j,toDate:c,dataUnit:I,setBizUnit:R,deptName:be,setDeptName:Ve,setDeptSeq:Qe,handleSearch1:tt,handleSearch2:at,handleSearch3:st,setModalVisible1:se,setModalVisible2:oe,loadingCodeHelp:Z,modalVisible1:ge,modalVisible2:Se,setMinorName:w,minorName:P,setFactUnit:E,setProgStatus:B,minorName2:m,setUseType:q,empName:bt,custName:kt,setProdPlanNo:wt,prodPlanNo:De,setWorkOrderNo:Tt,workOrderNo:Ee,setProdReqNo:It,prodReqNo:Me,setOutReqNo:Pt,outReqNo:Ae})})]})]}),a.jsxs("div",{className:"col-start-1 col-end-5 row-start-2 w-full h-full rounded-lg",children:[a.jsx(ds,{loading:g,error:h}),f.length>0?a.jsx(a.Fragment,{children:a.jsx(Xa,{data:f,loading:l,setData:N,onCellClicked:qt,setGridData:Ie,gridData:Te})}):a.jsx(a.Fragment,{children:a.jsx(fa,{})})]})]})}),a.jsx(es,{setModalVisible:se,modalVisible:ge,loadingCodeHelp:Z,handleSearch:tt,data:Oe,setConditionSeq:ie,setSubConditionSql:ee,fetchCodehelpData1:Xe,keyword:F,setKeyword:te,setDeptSeq:Qe,setDeptName:Ve,deptName:be,setData1:ne}),a.jsx(ss,{setModalVisible:oe,modalVisible:Se,loadingCodeHelp:Z,handleSearch:at,data:Re,setConditionSeq:ie,setSubConditionSql:ee,fetchCodehelpData2:Je,keyword:F,setKeyword:te,setEmpName:Ct,setEmpSeq:Nt}),a.jsx(ls,{setModalVisible:ye,modalVisible:qe,loadingCodeHelp:Z,handleSearch:st,data:$e,setConditionSeq:ie,setSubConditionSql:ee,fetchCodehelpData3:Ze,keyword:F,setKeyword:te,setCustName:jt,setCustSeq:vt})]})}export{Ps as default};
