import{K as ce,k as ta,m as re,n as aa,o as sa,p as na,q as oa,t as la,r as s,v as Me,w as jt,x as Z,N as ia,y as ca,z as ra,A as da,J as ua,L as ma,O as E,P as pa,Q as fa,U as ha,V as ga,W as xa,X as Sa,Y as Ca,Z as ba,j as t,F as _,b as ya,c as U,d as St,S as J,I as W,B as H,R as je,u as kt,C as F,G as x,D as ke,M as Ae,a as wt,H as It,E as Ct,e as Na,f as bt,l as va,g as ja,T as ka,s as ye,h as wa}from"./index-BRdHSrU3.js";import{A as we}from"./index-BZXw2AV1.js";import{G as qe}from"./getCodeHelpCombo-D8pyyueB.js";import{C as Ia}from"./index-BEDMd2lo.js";import{R as $a}from"./moment-eCcSryaS.js";import{R as Oa}from"./FileDoneOutlined-D3fa00T_.js";import{R as Ie}from"./FilterOutlined-C28rl2Mj.js";import{a as $t}from"./tokenService-BioOSVnB.js";import{M as yt}from"./modalWaiting-CcQk9_dv.js";import"./ExclamationCircleOutlined-Cj092FXG.js";const Da=e=>{const{componentCls:a,notificationMarginEdge:n,animationMaxHeight:o}=e,i=`${a}-notice`,c=new ce("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),f=new ce("antNotificationTopFadeIn",{"0%":{top:-o,opacity:0},"100%":{top:0,opacity:1}}),d=new ce("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(o).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),l=new ce("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[a]:{[`&${a}-top, &${a}-bottom`]:{marginInline:0,[i]:{marginInline:"auto auto"}},[`&${a}-top`]:{[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:f}},[`&${a}-bottom`]:{[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:d}},[`&${a}-topRight, &${a}-bottomRight`]:{[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:c}},[`&${a}-topLeft, &${a}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:n,_skip_check_:!0},[i]:{marginInlineEnd:"auto",marginInlineStart:0},[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:l}}}}},Ta=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Pa={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Ra=(e,a)=>{const{componentCls:n}=e;return{[`${n}-${a}`]:{[`&${n}-stack > ${n}-notice-wrapper`]:{[a.startsWith("top")?"top":"bottom"]:0,[Pa[a]]:{value:0,_skip_check_:!0}}}}},qa=e=>{const a={};for(let n=1;n<e.notificationStackLayer;n++)a[`&:nth-last-child(${n+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},a)},Ea=e=>{const a={};for(let n=1;n<e.notificationStackLayer;n++)a[`&:nth-last-child(${n+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},a)},Ma=e=>{const{componentCls:a}=e;return Object.assign({[`${a}-stack`]:{[`& > ${a}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},qa(e))},[`${a}-stack:not(${a}-stack-expanded)`]:{[`& > ${a}-notice-wrapper`]:Object.assign({},Ea(e))},[`${a}-stack${a}-stack-expanded`]:{[`& > ${a}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Ta.map(n=>Ra(e,n)).reduce((n,o)=>Object.assign(Object.assign({},n),o),{}))},Ot=e=>{const{iconCls:a,componentCls:n,boxShadow:o,fontSizeLG:i,notificationMarginBottom:c,borderRadiusLG:f,colorSuccess:d,colorInfo:l,colorWarning:m,colorError:h,colorTextHeading:b,notificationBg:y,notificationPadding:O,notificationMarginEdge:T,notificationProgressBg:j,notificationProgressHeight:p,fontSize:k,lineHeight:u,width:I,notificationIconSize:g,colorText:P}=e,S=`${n}-notice`;return{position:"relative",marginBottom:c,marginInlineStart:"auto",background:y,borderRadius:f,boxShadow:o,[S]:{padding:O,width:I,maxWidth:`calc(100vw - ${re(e.calc(T).mul(2).equal())})`,overflow:"hidden",lineHeight:u,wordWrap:"break-word"},[`${S}-message`]:{marginBottom:e.marginXS,color:b,fontSize:i,lineHeight:e.lineHeightLG},[`${S}-description`]:{fontSize:k,color:P},[`${S}-closable ${S}-message`]:{paddingInlineEnd:e.paddingLG},[`${S}-with-icon ${S}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(g).equal(),fontSize:i},[`${S}-with-icon ${S}-description`]:{marginInlineStart:e.calc(e.marginSM).add(g).equal(),fontSize:k},[`${S}-icon`]:{position:"absolute",fontSize:g,lineHeight:1,[`&-success${a}`]:{color:d},[`&-info${a}`]:{color:l},[`&-warning${a}`]:{color:m},[`&-error${a}`]:{color:h}},[`${S}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},aa(e)),[`${S}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${re(f)} * 2)`,left:{_skip_check_:!0,value:f},right:{_skip_check_:!0,value:f},bottom:0,blockSize:p,border:0,"&, &::-webkit-progress-bar":{borderRadius:f,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:j},"&::-webkit-progress-value":{borderRadius:f,background:j}},[`${S}-btn`]:{float:"right",marginTop:e.marginSM}}},Aa=e=>{const{componentCls:a,notificationMarginBottom:n,notificationMarginEdge:o,motionDurationMid:i,motionEaseInOut:c}=e,f=`${a}-notice`,d=new ce("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:n},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[a]:Object.assign(Object.assign({},sa(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:o,_skip_check_:!0},[`${a}-hook-holder`]:{position:"relative"},[`${a}-fade-appear-prepare`]:{opacity:"0 !important"},[`${a}-fade-enter, ${a}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:c,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${a}-fade-leave`]:{animationTimingFunction:c,animationFillMode:"both",animationDuration:i,animationPlayState:"paused"},[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationPlayState:"running"},[`${a}-fade-leave${a}-fade-leave-active`]:{animationName:d,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${f}-btn`]:{float:"left"}}})},{[a]:{[`${f}-wrapper`]:Object.assign({},Ot(e))}}]},Dt=e=>({zIndexPopup:e.zIndexPopupBase+na+50,width:384}),Tt=e=>{const a=e.paddingMD,n=e.paddingLG;return oa(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:a,notificationPaddingHorizontal:n,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${re(e.paddingMD)} ${re(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},Pt=ta("Notification",e=>{const a=Tt(e);return[Aa(a),Da(a),Ma(a)]},Dt),Ba=la(["Notification","PurePanel"],e=>{const a=`${e.componentCls}-notice`,n=Tt(e);return{[`${a}-pure-panel`]:Object.assign(Object.assign({},Ot(n)),{width:n.width,maxWidth:`calc(100vw - ${re(e.calc(n.notificationMarginEdge).mul(2).equal())})`,margin:0})}},Dt);var za=function(e,a){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)a.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function Be(e,a){return a===null||a===!1?null:a||s.createElement(ca,{className:`${e}-close-icon`})}const Fa={success:ra,info:da,error:ua,warning:ma},Rt=e=>{const{prefixCls:a,icon:n,type:o,message:i,description:c,btn:f,role:d="alert"}=e;let l=null;return n?l=s.createElement("span",{className:`${a}-icon`},n):o&&(l=s.createElement(Fa[o]||null,{className:Z(`${a}-icon`,`${a}-icon-${o}`)})),s.createElement("div",{className:Z({[`${a}-with-icon`]:l}),role:d},l,s.createElement("div",{className:`${a}-message`},i),s.createElement("div",{className:`${a}-description`},c),f&&s.createElement("div",{className:`${a}-btn`},f))},_a=e=>{const{prefixCls:a,className:n,icon:o,type:i,message:c,description:f,btn:d,closable:l=!0,closeIcon:m,className:h}=e,b=za(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:y}=s.useContext(Me),O=a||y("notification"),T=`${O}-notice`,j=jt(O),[p,k,u]=Pt(O,j);return p(s.createElement("div",{className:Z(`${T}-pure-panel`,k,n,u,j)},s.createElement(Ba,{prefixCls:O}),s.createElement(ia,Object.assign({},b,{prefixCls:O,eventKey:"pure",duration:null,closable:l,className:Z({notificationClassName:h}),closeIcon:Be(O,m),content:s.createElement(Rt,{prefixCls:T,icon:o,type:i,message:c,description:f,btn:d})}))))};function Ua(e,a,n){let o;switch(e){case"top":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:a,bottom:"auto"};break;case"topLeft":o={left:0,top:a,bottom:"auto"};break;case"topRight":o={right:0,top:a,bottom:"auto"};break;case"bottom":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:n};break;case"bottomLeft":o={left:0,top:"auto",bottom:n};break;default:o={right:0,top:"auto",bottom:n};break}return o}function La(e){return{motionName:`${e}-fade`}}var Ha=function(e,a){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)a.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Nt=24,Ga=4.5,Wa="topRight",Va=e=>{let{children:a,prefixCls:n}=e;const o=jt(n),[i,c,f]=Pt(n,o);return i(E.createElement(ha,{classNames:{list:Z(c,f,o)}},a))},Ka=(e,a)=>{let{prefixCls:n,key:o}=a;return E.createElement(Va,{prefixCls:n,key:o},e)},Ya=E.forwardRef((e,a)=>{const{top:n,bottom:o,prefixCls:i,getContainer:c,maxCount:f,rtl:d,onAllRemoved:l,stack:m,duration:h,pauseOnHover:b=!0,showProgress:y}=e,{getPrefixCls:O,getPopupContainer:T,notification:j,direction:p}=s.useContext(Me),[,k]=pa(),u=i||O("notification"),I=C=>Ua(C,n??Nt,o??Nt),g=()=>Z({[`${u}-rtl`]:d??p==="rtl"}),P=()=>La(u),[S,N]=fa({prefixCls:u,style:I,className:g,motion:P,closable:!0,closeIcon:Be(u),duration:h??Ga,getContainer:()=>(c==null?void 0:c())||(T==null?void 0:T())||document.body,maxCount:f,pauseOnHover:b,showProgress:y,onAllRemoved:l,renderNotifications:Ka,stack:m===!1?!1:{threshold:typeof m=="object"?m==null?void 0:m.threshold:void 0,offset:8,gap:k.margin}});return E.useImperativeHandle(a,()=>Object.assign(Object.assign({},S),{prefixCls:u,notification:j})),N});function qt(e){const a=E.useRef(null);return ga(),[E.useMemo(()=>{const o=d=>{var l;if(!a.current)return;const{open:m,prefixCls:h,notification:b}=a.current,y=`${h}-notice`,{message:O,description:T,icon:j,type:p,btn:k,className:u,style:I,role:g="alert",closeIcon:P,closable:S}=d,N=Ha(d,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),C=Be(y,typeof P<"u"?P:b==null?void 0:b.closeIcon);return m(Object.assign(Object.assign({placement:(l=e==null?void 0:e.placement)!==null&&l!==void 0?l:Wa},N),{content:E.createElement(Rt,{prefixCls:y,icon:j,type:p,message:O,description:T,btn:k,role:g}),className:Z(p&&`${y}-${p}`,u,b==null?void 0:b.className),style:Object.assign(Object.assign({},b==null?void 0:b.style),I),closeIcon:C,closable:S??!!C}))},c={open:o,destroy:d=>{var l,m;d!==void 0?(l=a.current)===null||l===void 0||l.close(d):(m=a.current)===null||m===void 0||m.destroy()}};return["success","info","warning","error"].forEach(d=>{c[d]=l=>o(Object.assign(Object.assign({},l),{type:d}))}),c},[]),E.createElement(Ya,Object.assign({key:"notification-holder"},e,{ref:a}))]}function Xa(e){return qt(e)}let L=null,Ne=e=>e(),ve=[],de={};function vt(){const{getContainer:e,rtl:a,maxCount:n,top:o,bottom:i,showProgress:c,pauseOnHover:f}=de,d=(e==null?void 0:e())||document.body;return{getContainer:()=>d,rtl:a,maxCount:n,top:o,bottom:i,showProgress:c,pauseOnHover:f}}const Qa=E.forwardRef((e,a)=>{const{notificationConfig:n,sync:o}=e,{getPrefixCls:i}=s.useContext(Me),c=de.prefixCls||i("notification"),f=s.useContext(ba),[d,l]=qt(Object.assign(Object.assign(Object.assign({},n),{prefixCls:c}),f.notification));return E.useEffect(o,[]),E.useImperativeHandle(a,()=>{const m=Object.assign({},d);return Object.keys(m).forEach(h=>{m[h]=function(){return o(),d[h].apply(d,arguments)}}),{instance:m,sync:o}}),l}),Ja=E.forwardRef((e,a)=>{const[n,o]=E.useState(vt),i=()=>{o(vt)};E.useEffect(i,[]);const c=Ca(),f=c.getRootPrefixCls(),d=c.getIconPrefixCls(),l=c.getTheme(),m=E.createElement(Qa,{ref:a,sync:i,notificationConfig:n});return E.createElement(Sa,{prefixCls:f,iconPrefixCls:d,theme:l},c.holderRender?c.holderRender(m):m)});function ze(){if(!L){const e=document.createDocumentFragment(),a={fragment:e};L=a,Ne(()=>{xa(E.createElement(Ja,{ref:n=>{const{instance:o,sync:i}=n||{};Promise.resolve().then(()=>{!a.instance&&o&&(a.instance=o,a.sync=i,ze())})}}),e)});return}L.instance&&(ve.forEach(e=>{switch(e.type){case"open":{Ne(()=>{L.instance.open(Object.assign(Object.assign({},de),e.config))});break}case"destroy":Ne(()=>{L==null||L.instance.destroy(e.key)});break}}),ve=[])}function Za(e){de=Object.assign(Object.assign({},de),e),Ne(()=>{var a;(a=L==null?void 0:L.sync)===null||a===void 0||a.call(L)})}function Et(e){ve.push({type:"open",config:e}),ze()}const es=e=>{ve.push({type:"destroy",key:e}),ze()},ts=["success","info","warning","error"],as={open:Et,destroy:es,config:Za,useNotification:Xa,_InternalPanelDoNotUseOrYouWillBeFired:_a},Mt=as;ts.forEach(e=>{Mt[e]=a=>Et(Object.assign(Object.assign({},a),{type:e}))});function ss({formData:e,setFormData:a,setToDate:n,toDate:o,dataUnit:i,setBizUnit:c,handleSearch1:f,handleSearch2:d,handleSearch3:l,minorName:m,setFactUnit:h,setProgStatus:b,minorName2:y,setUseType:O,deptName:T,empName:j,custName:p,prodPlanNo:k,setProdPlanNo:u,setWorkOrderNo:I,workOrderNo:g,prodReqNo:P,setProdReqNo:S,outReqNo:N,setOutReqNo:C,setDeptName:v,setDeptSeq:D,resetTable:R,setEmpName:B,setEmpSeq:M,resetTable2:G,setCustSeq:z,setCustName:V,resetTable3:ue}){const ee=r=>{a(r)},Y=r=>{n(r)},te=r=>{h(r)},me=r=>{b(r)},ae=r=>{O(r)},ne=r=>{v(r.target.value),D(""),R()},oe=r=>{B(r.target.value),M(""),G()},pe=r=>{V(r.target.value),z(""),ue()};return t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(_,{layout:"vertical",onKeyDown:r=>{r.key==="Enter"&&r.preventDefault()},children:t.jsxs(ya,{className:"gap-4 flex items-center ",children:[t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Ngày yêu cầu 1"}),className:"mb-0",children:t.jsx(St,{className:"w-full text-sm p-2",value:e,onChange:ee,format:"YYYY-MM-DD"})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Ngày yêu cầu 2"}),className:"mb-0",children:t.jsx(St,{className:"w-full text-sm p-2",value:o,onChange:Y,format:"YYYY-MM-DD"})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Nơi sản xuất"}),className:"mb-0",children:t.jsx(J,{defaultValue:"",size:"large",style:{width:190},allowClear:!0,onChange:te,options:[{label:"All",value:""},...(i==null?void 0:i.map(r=>({label:r==null?void 0:r.AccUnitName,value:r==null?void 0:r.FactUnit})))||[]]})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Bộ phận yêu cầu"}),className:"mb-0",children:t.jsx(W,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:r=>{r.key==="Enter"&&f()},value:T,onChange:ne,onDoubleClick:f})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Người yêu cầu"}),className:"mb-0",children:t.jsx(W,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:r=>{r.key==="Enter"&&d()},value:j,onChange:oe,onDoubleClick:d})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Khách hàng"}),className:"mb-0",children:t.jsx(W,{size:"small",className:" text-sm p-2 bg-blue-50",onKeyDown:r=>{r.key==="Enter"&&l()},value:p,onChange:pe,onDoubleClick:l})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Số yêu cầu"}),className:"mb-0",children:t.jsx(W,{value:N,onChange:r=>C(r.target.value),size:"small",className:" text-sm p-2"})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Số kế hoạch"}),className:"mb-0",children:t.jsx(W,{value:k,onChange:r=>u(r.target.value),size:"small",className:" text-sm p-2"})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Số lệnh sản xuất"}),className:"mb-0",children:t.jsx(W,{value:g,onChange:r=>I(r.target.value),size:"small",className:" text-sm p-2"})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Số yêu cầu sản xuất"}),className:"mb-0",children:t.jsx(W,{value:P,onChange:r=>S(r.target.value),size:"small",className:" text-sm p-2"})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Phân loại kho"}),className:"mb-0",children:t.jsx(J,{id:"typeSelect",defaultValue:"All",size:"large",style:{width:240},allowClear:!0,onChange:ae,options:[{label:"All",value:""},...(y==null?void 0:y.map(r=>({label:r==null?void 0:r.MinorName,value:r==null?void 0:r.Value})))||[]]})})}),t.jsx(U,{children:t.jsx(_.Item,{label:t.jsx("span",{className:"uppercase text-[10px]",children:"Trạng thái"}),className:"mb-0",children:t.jsx(J,{id:"typeSelect",defaultValue:"All",size:"large",style:{width:240},allowClear:!0,onChange:me,options:[{label:"All",value:""},...(m==null?void 0:m.map(r=>({label:r==null?void 0:r.MinorName,value:r==null?void 0:r.Value})))||[]]})})})]})})})}function ns({nextPage:e,debouncedFetchSPDMMOutReqListQueryWeb:a}){return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(H,{type:"default",icon:t.jsx(Oa,{}),size:"middle",className:"uppercase",color:"default",variant:"filled",onClick:e,style:{backgroundColor:"#f0f0f0",borderColor:"#d9d9d9"},children:"XỬ LÝ XUẤT KHO"},"Reset"),t.jsx(H,{type:"primary",icon:t.jsx(je,{}),size:"middle",onClick:a,className:"uppercase",children:"SEARCH"},"Save")]})}function os({data:e,onCellClicked:a,gridData:n,setGridData:o,loading:i}){const[c,f]=s.useState(!1),d=s.useCallback(()=>f(!1),[]);s.useState([!1,!1,!1]);const{t:l}=kt(),[m,h]=s.useState({columns:F.empty(),rows:F.empty()}),b=s.useMemo(()=>[{title:l("1326")},{title:l("607")},{title:l("60498")},{title:l("200")},{title:l("647")},{title:l("366")},{title:l("1794")},{title:l("600")},{title:l("1985")},{title:l("2102")},{title:l("2101")},{title:l("510")},{title:l("3244")},{title:l("2846")},{title:l("2170")},{title:l("2169")},{title:l("1969")},{title:l("602")},{title:l("4382")},{title:l("9542")},{title:l("13570")},{title:l("362")},{title:l("369")}],[]),[y,O]=s.useState(b),T=s.useCallback((u,I)=>{const g=y.indexOf(u);if(g!==-1){const P={...u,width:I},S=[...y];S.splice(g,1,P),O(S)}},[y]),j=s.useCallback(([u,I])=>{const g=n[I]||{},{IsStop:P="",IsConfirm:S="",FactUnitName:N="",ReqDate:C="",OutReqNo:v="",DeptName:D="",EmpName:R="",UseTypeName:B="",WorkOrderNo:M="",AssyItemName:G="",AssyItemNo:z="",AssyItemSpec:V="",AssyUnitName:ue="",ProcName:ee="",ItemName:Y="",ItemNo:te="",ItemSpec:me="",UnitName:ae="",Qty:ne="",ProgQty:oe="",IsReturn:pe="",Remark:r="",ProgStatusName:fe=""}=g,q=K=>K!=null?String(K):"",he={0:{kind:x.Boolean,data:P},1:{kind:x.Boolean,data:S},2:{kind:x.Text,data:q(N)},3:{kind:x.Text,data:q(C)},4:{kind:x.Text,data:q(v)},5:{kind:x.Text,data:q(D)},6:{kind:x.Text,data:q(R)},7:{kind:x.Text,data:q(B)},8:{kind:x.Text,data:q(M)},9:{kind:x.Text,data:q(G)},10:{kind:x.Text,data:q(z)},11:{kind:x.Text,data:q(V)},12:{kind:x.Text,data:q(ue)},13:{kind:x.Text,data:q(ee)},14:{kind:x.Text,data:q(Y)},15:{kind:x.Text,data:q(te)},16:{kind:x.Text,data:q(me)},17:{kind:x.Text,data:q(ae)},18:{kind:x.Text,data:q(ne)},19:{kind:x.Text,data:q(oe)},20:{kind:x.Boolean,data:pe},21:{kind:x.Text,data:q(r)},22:{kind:x.Text,data:q(fe)}};if(he.hasOwnProperty(u)){const{kind:K,data:ge}=he[u];return{kind:K,data:ge,displayData:ge}}return{kind:"",data:"",displayData:""}},[n]),[p,k]=s.useState(void 0);return s.useCallback(u=>{console.log("cell",u),k(u)},[]),s.useEffect(()=>{o(e)},[e]),t.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8  overflow-hidden",children:t.jsxs("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:[t.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 p-2 text-blue-600 uppercase",children:[t.jsx($a,{}),"DATA SHEET"]}),t.jsx(ke,{columns:y,getCellContent:j,rows:n.length,showSearch:c,getCellsForSelection:!0,onSearchClose:d,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:T,smoothScrollY:!0,smoothScrollX:!0,rowSelect:"single",onCellClicked:a,gridSelection:m,onGridSelectionChange:h,getRowThemeOverride:u=>u%2===0?void 0:{bgCell:"#FBFBFB"}})]})})}function ls({data:e,onCellClicked:a,setSelection:n,selection:o}){const[i,c]=s.useState([]),[f,d]=s.useState(!1),l=s.useCallback(()=>d(!1),[]),m=s.useMemo(()=>[{title:"BeDeptName"},{title:"BeBegDate"},{title:"BeEndDate"},{title:"DeptRemark"}],[]),[h,b]=s.useState(m),y=s.useCallback((p,k)=>{const u=h.indexOf(p);if(u!==-1){const I={...p,width:k},g=[...h];g.splice(u,1,I),b(g)}},[h]),O=s.useCallback(([p,k])=>{const u=i[k]||{},{BeDeptName:I="",BeBegDate:g="",BeEndDate:P="",DeptRemark:S=""}=u,N=v=>v!=null?String(v):"",C={0:{kind:x.Text,data:N(I)},1:{kind:x.Text,data:N(g)},2:{kind:x.Text,data:N(P)},3:{kind:x.Text,data:N(S)}};if(C.hasOwnProperty(p)){const{kind:v,data:D}=C[p];return{kind:v,data:D,displayData:D}}return{kind:x.Text,data:"",displayData:""}},[i]),[T,j]=s.useState(void 0);return s.useCallback(p=>{j(p)},[]),s.useEffect(()=>{c(e)},[e]),t.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:t.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:t.jsx(ke,{columns:h,getCellContent:O,rows:i.length,showSearch:f,getCellsForSelection:!0,onSearchClose:l,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:y,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:a,rowSelect:"single",gridSelection:o,onGridSelectionChange:n})})})}const{Search:is}=W;function cs({setConditionSeq:e,data:a,modalVisible:n,setModalVisible:o,fetchCodehelpData1:i,handleSearch:c,setSubConditionSql:f,setDeptName:d,setDeptSeq:l,deptName:m,selection:h,setSelection:b,resetTable:y}){const[O,T]=s.useState(!1),[j,p]=s.useState(null),[k,u]=s.useState(null);s.useState(null);const I=C=>{e(C)},g=C=>{f(C)},P=(C,v)=>{let D;if(C[0]!==-1){console.log("onCellClicked");return}if(C[0]===-1?(D=C[1],T(!0)):(D=C[0],T(!1)),j&&j[0]===C[0]&&j[1]===C[1]){d(""),l(""),p(null),u(null);return}if(D>=0&&D<a.length){const R=a[D];d(R==null?void 0:R.BeDeptName),l(R==null?void 0:R.BeDeptSeq),u(R),p(C)}},S=()=>{o(!1),d(""),l(""),y()},N=C=>{d(C.target.value),l(""),y()};return t.jsx("div",{children:t.jsxs(Ae,{open:n,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[t.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[t.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[t.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[t.jsx(Ie,{}),"Điều kiện truy vấn"]}),t.jsx("span",{className:"relative size-5 shrink-0",children:t.jsx(we,{})})]}),t.jsxs("div",{className:"flex p-2 gap-4",children:[t.jsx("div",{className:"flex flex-col",children:t.jsx(J,{id:"typeSelect",defaultValue:"Bộ phận",style:{width:120},size:"middle",onChange:I,options:[{value:1,label:"Bộ phận"},{value:0,label:"Mã bộ phận"}]})}),t.jsx("div",{className:"flex flex-col",children:t.jsx(J,{id:"typeSelect",defaultValue:"Sử dụng",style:{width:300},size:"middle",options:[{value:"IsUse = 1",label:"Sử dụng"},{value:"IsUse = 0",label:"Chưa sử dụng"}],onChange:g})}),t.jsx("div",{className:"flex flex-col w-full",children:t.jsx(is,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:m,onKeyDown:C=>{C.key==="Enter"&&c()},onChange:N,className:" w-full"})}),t.jsx("div",{className:"flex flex-col",children:t.jsx(H,{type:"primary",icon:t.jsx(je,{}),size:"middle",onClick:i,children:"Truy vấn"})})]})]}),t.jsx(ls,{data:a,onCellClicked:P,setSelection:b,selection:h})]}),t.jsxs("div",{className:"flex justify-end gap-4 ",children:[t.jsx(H,{onClick:S,children:"Cancel"}),t.jsx(H,{type:"primary",onClick:()=>o(!1),children:"Save"})]})]})})}function rs({data:e,onCellClicked:a,setSelection:n,selection:o}){const[i,c]=s.useState([]),[f,d]=s.useState(!1),l=s.useCallback(()=>d(!1),[]),m=s.useMemo(()=>[{title:"EmpName"},{title:"EmpID"},{title:"DeptName"},{title:"WkDeptName"},{title:"UMJoName"},{title:"PosName"},{title:"UMJpName"},{title:"UMJdName"},{title:"TypeName"},{title:"SMSexName"}],[]),[h,b]=s.useState(m),y=s.useCallback((p,k)=>{const u=h.indexOf(p);if(u!==-1){const I={...p,width:k},g=[...h];g.splice(u,1,I),b(g)}},[h]),O=s.useCallback(([p,k])=>{const u=i[k]||{},{EmpName:I="",EmpID:g="",DeptName:P="",WkDeptName:S="",UMJoName:N="",PosName:C="",UMJpName:v="",UMJdName:D="",TypeName:R="",SMSexName:B=""}=u,M=z=>z!=null?String(z):"",G={0:{kind:x.Text,data:M(I)},1:{kind:x.Text,data:M(g)},2:{kind:x.Text,data:M(P)},3:{kind:x.Text,data:M(S)},4:{kind:x.Text,data:M(N)},5:{kind:x.Text,data:M(C)},6:{kind:x.Text,data:M(v)},7:{kind:x.Text,data:M(D)},8:{kind:x.Text,data:M(R)},9:{kind:x.Text,data:M(B)}};if(G.hasOwnProperty(p)){const{kind:z,data:V}=G[p];return{kind:z,data:V,displayData:V}}return{kind:x.Text,data:"",displayData:""}},[i]),[T,j]=s.useState(void 0);return s.useCallback(p=>{j(p)},[]),s.useEffect(()=>{c(e)},[e]),t.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:t.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:t.jsx(ke,{columns:h,getCellContent:O,rows:i.length,showSearch:f,getCellsForSelection:!0,onSearchClose:l,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:y,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:a,rowSelect:"multi",gridSelection:o,onGridSelectionChange:n})})})}const{Search:ds}=W;function us({setConditionSeq:e,data:a,modalVisible:n,setModalVisible:o,empName:i,handleSearch:c,setSubConditionSql:f,fetchCodehelpData2:d,setEmpSeq:l,setEmpName:m,setSelection:h,selection:b,resetTable:y}){const[O,T]=s.useState(!1),[j,p]=s.useState(null),[k,u]=s.useState(null);s.useState(null);const I=N=>{e(N)},g=(N,C)=>{let v;if(N[0]===-1){if(N[0]===-1?(v=N[1],T(!0)):(v=N[0],T(!1)),j&&j[0]===N[0]&&j[1]===N[1]){m(""),l(""),p(null),u(null);return}if(v>=0&&v<a.length){const D=a[v];m(D==null?void 0:D.EmpName),l(D==null?void 0:D.EmpSeq),u(D),p(N)}}},P=()=>{o(!1),m(""),l(""),y()},S=N=>{m(N.target.value),l(""),y()};return t.jsx("div",{children:t.jsxs(Ae,{open:n,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[t.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[t.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[t.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[t.jsx(Ie,{}),"Điều kiện truy vấn"]}),t.jsx("span",{className:"relative size-5 shrink-0",children:t.jsx(we,{})})]}),t.jsxs("div",{className:"flex p-2 gap-4",children:[t.jsx("div",{className:"flex flex-col",children:t.jsx(J,{id:"typeSelect",defaultValue:"Nhân viên",style:{width:180},size:"middle",options:[{value:1,label:"Nhân viên"},{value:2,label:"Mã nhân viên"}],onChange:I})}),t.jsx("div",{className:"flex flex-col w-full",children:t.jsx(ds,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:i,onKeyDown:N=>{N.key==="Enter"&&c()},onChange:S,className:" w-full"})}),t.jsx("div",{className:"flex flex-col",children:t.jsx(H,{type:"primary",icon:t.jsx(je,{}),size:"middle",onClick:d,children:"Truy vấn"})})]})]}),t.jsx(rs,{data:a,onCellClicked:g,setSelection:h,selection:b})]}),t.jsxs("div",{className:"flex justify-end gap-4 ",children:[t.jsx(H,{onClick:P,children:"Cancel"}),t.jsx(H,{type:"primary",onClick:()=>o(!1),children:"Save"})]})]})})}function ms({data:e,onCellClicked:a,selection:n,setSelection:o}){const[i,c]=s.useState([]),[f,d]=s.useState(!1),l=s.useCallback(()=>d(!1),[]),m=s.useMemo(()=>[{title:"CustSeq"},{title:"FullName"},{title:"CustNo"},{title:"BizNo"},{title:"UMCustClassName"}],[]),[h,b]=s.useState(m),y=s.useCallback((p,k)=>{const u=h.indexOf(p);if(u!==-1){const I={...p,width:k},g=[...h];g.splice(u,1,I),b(g)}},[h]),O=s.useCallback(([p,k])=>{const u=i[k]||{},{CustSeq:I="",FullName:g="",CustNo:P="",BizNo:S="",UMCustClassName:N=""}=u,C=D=>D!=null?String(D):"",v={0:{kind:x.Text,data:C(I)},1:{kind:x.Text,data:C(g)},2:{kind:x.Text,data:C(P)},3:{kind:x.Text,data:C(S)},4:{kind:x.Text,data:C(N)}};if(v.hasOwnProperty(p)){const{kind:D,data:R}=v[p];return{kind:D,data:R,displayData:R}}return{kind:x.Text,data:"",displayData:""}},[i]),[T,j]=s.useState(void 0);return s.useCallback(p=>{j(p)},[]),s.useEffect(()=>{c(e)},[e]),t.jsx("div",{className:"w-full gap-1 h-full flex items-center justify-center pb-8",children:t.jsx("div",{className:"w-full h-full flex flex-col border bg-white rounded-lg overflow-hidden ",children:t.jsx(ke,{columns:h,getCellContent:O,rows:i.length,showSearch:f,getCellsForSelection:!0,onSearchClose:l,width:"100%",height:"100%",rowMarkers:"both",useRef:s.useRef,onColumnResize:y,smoothScrollY:!0,smoothScrollX:!0,onCellClicked:a,rowSelect:"multi",gridSelection:n,onGridSelectionChange:o})})})}const{Search:ps}=W;function fs({setConditionSeq:e,data:a,modalVisible:n,setModalVisible:o,setKeyword:i,keyword:c,handleSearch:f,setSubConditionSql:d,fetchCodehelpData3:l,setCustSeq:m,setCustName:h,custName:b,resetTable:y,setSelection:O,selection:T}){const[j,p]=s.useState(!1),[k,u]=s.useState(null),[I,g]=s.useState(null);s.useState(null);const P=v=>{e(v)},S=(v,D)=>{let R;if(v[0]===-1){if(v[0]===-1?(R=v[1],p(!0)):(R=v[0],p(!1)),k&&k[0]===v[0]&&k[1]===v[1]){h(""),m(""),u(null),g(null);return}if(R>=0&&R<a.length){const B=a[R];h(B==null?void 0:B.FullName),m(B==null?void 0:B.CustSeq),g(B),u(v)}}},N=()=>{o(!1),h(""),m(""),y()},C=v=>{h(v.target.value),m(""),y()};return t.jsx("div",{children:t.jsxs(Ae,{open:n,width:"80%",maskClosable:!1,footer:null,closable:!1,style:{top:50},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"75vh"},className:"gap-4",children:[t.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[t.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[t.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600",children:[t.jsx(Ie,{}),"Điều kiện truy vấn"]}),t.jsx("span",{className:"relative size-5 shrink-0",children:t.jsx(we,{})})]}),t.jsxs("div",{className:"flex p-2 gap-4",children:[t.jsx("div",{className:"flex flex-col",children:t.jsx(J,{id:"typeSelect",defaultValue:"Điểm gia công bên ngoài",style:{width:220},size:"middle",options:[{value:1,label:"Điểm gia công bên ngoài"},{value:2,label:"Số đơn vị gia công"},{value:3,label:"Mã số kinh doanh"},{value:4,label:"Tương hiệu"}],onChange:P})}),t.jsx("div",{className:"flex flex-col w-full",children:t.jsx(ps,{allowClear:!0,size:"middle",placeholder:"Tìm kiếm",value:b,onKeyDown:v=>{v.key==="Enter"&&f()},onChange:C,className:" w-full"})}),t.jsx("div",{className:"flex flex-col",children:t.jsx(H,{type:"primary",icon:t.jsx(je,{}),size:"middle",onClick:l,children:"Truy vấn"})})]})]}),t.jsx(ms,{data:a,onCellClicked:S,setSelection:O,selection:T})]}),t.jsxs("div",{className:"flex justify-end gap-4 ",children:[t.jsx(H,{onClick:N,children:"Cancel"}),t.jsx(H,{type:"primary",onClick:()=>o(!1),children:"Save"})]})]})})}const hs=e=>`
       <DataBlock1>
    <WorkingTag>A</WorkingTag>
    <IDX_NO>1</IDX_NO>
    <Status>0</Status>
    <DataSeq>1</DataSeq>
    <Selected>1</Selected>
    <TABLE_NAME>DataBlock1</TABLE_NAME>
    <IsChangedMst>${e.IsChangedMst}</IsChangedMst>
    <FactUnit>${e.FactUnit}</FactUnit>
    <ReqDate>${e.ReqDate}</ReqDate>
    <ReqDateTo>${e.ReqDateTo}</ReqDateTo>
    <OutReqNo>${e.OutReqNo}</OutReqNo>
    <UseType>${e.UseType}</UseType>
    <DeptSeq>${e.DeptSeq}</DeptSeq>
    <DeptName>${e.DeptName} </DeptName>
    <EmpSeq>${e.EmpSeq} </EmpSeq>
    <EmpName>${e.EmpName}</EmpName>
    <CustSeq>${e.CustSeq}</CustSeq>
    <CustName>${e.CustName}</CustName>
    <ProgStatus>${e.ProgStatus}</ProgStatus>
    <ProdPlanNo>${e.ProdPlanNo}</ProdPlanNo>
    <WorkOrderNo>${e.WorkOrderNo}</WorkOrderNo>
    <ProdReqNo>${e.ProdReqNo}</ProdReqNo>
  </DataBlock1>
    `,gs={xmlFlags:2,serviceSeq:4594,workingTag:"",companySeq:1,languageSeq:6,userSeq:0,pgmSeq:1036085},xs=e=>{const a=$t(),n={...gs,...e},i={xmlDocument:hs(n),xmlFlags:n.xmlFlags,serviceSeq:n.serviceSeq,workingTag:n.workingTag,companySeq:n.companySeq,languageSeq:n.languageSeq,userSeq:n.userSeq,pgmSeq:n.pgmSeq};return wt.post(`${It}/mssql/stock-out/sp-dmm-out-req-list`,i,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}).then(c=>{if(c.status===200||c.status===201)return c.data;throw new Error("Error from API: "+c.data.message)}).catch(c=>{const f=c.response?c.response.data.message||"Error from API":"Unknown error occurred";throw new Error(f)})},Ee=async(e,a,n,o,i,c,f,d,l,m,h,b,y,O,T,j,p,k,u,I)=>{try{const g=`${It}/mssql/code-help-query`,P=$t(),S=await wt.get(g,{params:{workingTag:e,languageSeq:a,codeHelpSeq:n,companySeq:o,keyword:i,param1:c,param2:f,param3:d,param4:l,conditionSeq:m,pageCount:h,pageSize:b,subConditionSql:y,accUnit:O,bizUnit:T,factUnit:j,deptSeq:p,wkDeptSeq:k,empSeq:u,userSeq:I},headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});return S.status===200?{success:!0,data:S.data.data}:{success:!1,message:Ct.ERROR}}catch(g){return{success:!1,message:g.response?g.response.data.message:Ct.ERROR}}},{Title:Ss,Text:Ds}=ka;function Ts({permissions:e,isMobile:a}){const{t:n}=kt();s.useRef(null);const o=Na(),[i,c]=s.useState(!1),[f,d]=s.useState(null),[l,m]=s.useState(!1),[h,b]=s.useState([]),[y,O]=s.useState([]),[T,j]=s.useState([]),[p,k]=s.useState([]),[u,I]=s.useState(bt().startOf("month")||""),[g,P]=s.useState(bt()),[S,N]=s.useState(4),[C,v]=s.useState(""),[D,R]=s.useState(""),[B,M]=s.useState(""),[G,z]=s.useState(null),V=w=>w.format("YYYYMMDD"),[ue,ee]=s.useState(!1),[Y,te]=s.useState(null),[me,ae]=s.useState(null),[ne,oe]=s.useState([]),[pe,r]=s.useState(!1),[fe,q]=s.useState(!1),[he,K]=s.useState([]),[ge,Fe]=s.useState([]),[At,_e]=s.useState([]),[Ue,$e]=s.useState(!1),[Bt,Le]=s.useState(!1),[xe,Oe]=s.useState(!1),[se,De]=s.useState(1),[le,Te]=s.useState(1),[X,Pe]=s.useState(""),[Se,He]=s.useState(""),[zt,Ge]=s.useState(""),[We,Ve]=s.useState(""),[Ft,Ke]=s.useState(""),[_t,Ye]=s.useState(""),[Xe,Qe]=s.useState(""),[Je,Ut]=s.useState(""),[Ze,Lt]=s.useState(""),[et,Ht]=s.useState(""),[tt,Gt]=s.useState(""),[Wt,at]=s.useState(!1),[Vt,st]=s.useState(!1),[nt,Ce]=s.useState(!0),[Kt,ot]=s.useState({columns:F.empty(),rows:F.empty()}),[Yt,lt]=s.useState({columns:F.empty(),rows:F.empty()}),[Xt,it]=s.useState({columns:F.empty(),rows:F.empty()}),be=()=>{ot({columns:F.empty(),rows:F.empty()})},ct=()=>{lt({columns:F.empty(),rows:F.empty()})},rt=()=>{it({columns:F.empty(),rows:F.empty()})};s.useEffect(()=>{const w=localStorage.getItem("detailsStateStockOut");r(w==="open")},[]);const dt=async()=>{if(nt===!1){ye.warning("Không thể thực hiện, vui lòng kiểm tra trạng thái.");return}Ce(!1),d(!0);const w=ye.loading("Đang tải dữ liệu, vui lòng chờ...",0);try{const Q={IsChangedMst:"1",FactUnit:C,ReqDate:u?V(u):"",ReqDateTo:g?V(g):"",OutReqNo:tt,UseType:B,DeptName:"",DeptSeq:zt,EmpSeq:Ft,EmpName:"",CustSeq:_t,CustName:"",ProgStatus:D,ProdPlanNo:Je,WorkOrderNo:Ze,ProdReqNo:et},A=await xs(Q);if(A!=null&&A.success){const $=(A==null?void 0:A.data)||[];b($),Ce(!0),w()}else b([]),ye.error("Có lỗi xảy ra khi tải dữ liệu.")}catch{m(!0),Ce(!0),w(),Mt.destroy(),ye.error("Có lỗi xảy ra khi tải dữ liệu.")}finally{Ce(!0),d(!1)}},ut=s.useCallback(async()=>{c(!0);try{const w=await Ee("Q",6,10010,1,Se,"","","","",se,1,1e5,le,"1",0,0,0,0,0,18770);K((w==null?void 0:w.data)||[])}catch{K([])}finally{c(!1)}},[se,le,Se]),mt=s.useCallback(async()=>{c(!0);try{const w=await Ee("Q",6,10009,1,X,"","","","",se,1,1e5,le,"1",0,0,0,0,0,18770);Fe((w==null?void 0:w.data)||[])}catch{Fe([])}finally{c(!1)}},[se,le,X]),pt=s.useCallback(async()=>{c(!0);try{const w=await Ee("Q",6,17071,1,X,"","","","",se,1,1e5,"SMCustStatus=2004001","1",0,0,0,0,0,18770);_e((w==null?void 0:w.data)||[])}catch{_e([])}finally{c(!1)}},[se,le,X]),ft=s.useCallback(async()=>{c(!0);try{const[w,Q,A]=await Promise.all([qe("",6,60001,1,"%","","","",""),qe("",6,19998,1,"%","6036","","",""),qe("",6,19998,1,"%","6044","","","")]);O((w==null?void 0:w.data)||[]),j((Q==null?void 0:Q.data)||[]),k((A==null?void 0:A.data)||[])}catch{O([]),j([])}finally{c(!1)}},[]),Re=s.useMemo(()=>va.debounce(ft,100),[ft]),Qt=s.useCallback(()=>{G&&o(`/u/warehouse/material/stock-out-request/${G}`)},[G,o]),Jt=(w,Q)=>{let A;if(w[0]===-1){if(w[0]===-1?(A=w[1],ee(!0)):(A=w[0],ee(!1)),Y&&Y[0]===w[0]&&Y[1]===w[1]){z(null),te(null),ae(null);return}if(A>=0&&A<h.length){const $=h[A],ie={IDX_NO:$.IDX_NO,EmpName:$.EmpName,FactUnit:$.FactUnit,FactUnitName:$.FactUnitName,IsConfirm:$.IsConfirm,IsReturn:$.IsReturn,IsStop:$.IsStop,ItemName:$.ItemName,ItemNo:$.ItemNo,ItemSeq:$.ItemSeq,ItemSpec:$.ItemSpec,ItemUnitSeq:$.ItemUnitSeq,OSPPOSeq:$.OSPPOSeq,OutReqNo:$.OutReqNo,OutReqSeq:$.OutReqSeq,PJTSeq:$.PJTSeq,ProdPlanSeq:$.ProdPlanSeq,ProdReqNo:$.ProdReqNo,ProgQty:$.ProgQty,ProgStatus:$.ProgStatus,ProgStatusName:$.ProgStatusName,Qty:$.Qty,Remark:$.Remark,ReqDate:$.ReqDate,UnitName:$.UnitName,UseType:$.UseType,UseTypeName:$.UseTypeName,WBSSeq:$.WBSSeq,WorkOrderNo:$.WorkOrderNo},Zt=Ia.AES.encrypt(JSON.stringify(ie),"TEST_ACCESS_KEY").toString();if(nt===!0)if(ie.IsStop===!0||ie.IsConfirm===!1)ie.IsStop===!0&&at(!0),ie.IsConfirm===!1&&st(!0),z(null);else{const ea=wa(Zt);z(ea),ae($),te(w)}}}},ht=async()=>{Oe(!0),q(!0),ut()},gt=async()=>{Oe(!0),$e(!0),mt()},xt=async()=>{Oe(!0),Le(!0),pt()};return s.useEffect(()=>(Re(),()=>{Re.cancel()}),[Re]),s.useEffect(()=>{dt()},[]),t.jsxs(t.Fragment,{children:[t.jsx(ja,{children:t.jsxs("title",{children:["ITM - ",n("Stock Out Request")]})}),t.jsx("div",{className:"bg-slate-50 p-3 h-screen overflow-hidden",children:t.jsxs("div",{className:"flex flex-col gap-4 md:grid md:grid-cols-4 md:grid-rows-[auto_1fr] md:gap-4 h-full",children:[t.jsxs("div",{className:"col-start-1 col-end-5 row-start-1 w-full rounded-lg ",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx(Ss,{level:4,className:"mt-2 uppercase opacity-85 ",children:n("Stock Out Request")}),t.jsx(ns,{nextPage:Qt,debouncedFetchSPDMMOutReqListQueryWeb:dt})]}),t.jsxs("details",{className:"group p-2 [&_summary::-webkit-details-marker]:hidden border rounded-lg bg-white",open:!0,children:[t.jsxs("summary",{className:"flex cursor-pointer items-center justify-between gap-1.5 text-gray-900",children:[t.jsxs("h2",{className:"text-xs font-medium flex items-center gap-2 text-blue-600 uppercase",children:[t.jsx(Ie,{}),n("Điều kiện truy vấn")]}),t.jsx("span",{className:"relative size-5 shrink-0",children:t.jsx(we,{})})]}),t.jsx("div",{className:"flex p-2 gap-4",children:t.jsx(ss,{formData:u,setFormData:I,setToDate:P,toDate:g,dataUnit:y,setBizUnit:N,deptName:Se,setDeptName:He,setDeptSeq:Ge,handleSearch1:ht,handleSearch2:gt,handleSearch3:xt,setModalVisible1:q,setModalVisible2:$e,loadingCodeHelp:xe,modalVisible1:fe,modalVisible2:Ue,setMinorName:j,minorName:T,setFactUnit:v,setProgStatus:R,minorName2:p,setUseType:M,empName:We,custName:Xe,setProdPlanNo:Ut,prodPlanNo:Je,setWorkOrderNo:Lt,workOrderNo:Ze,setProdReqNo:Ht,prodReqNo:et,setOutReqNo:Gt,outReqNo:tt,resetTable:be,setEmpName:Ve,setEmpSeq:Ke,resetTable2:ct,resetTable3:rt,setCustName:Qe,setCustSeq:Ye})})]})]}),t.jsx("div",{className:"col-start-1 col-end-5 row-start-2 w-full h-full rounded-lg",children:t.jsx(os,{data:h,loading:i,setData:b,onCellClicked:Jt,setGridData:oe,gridData:ne})})]})}),t.jsx(cs,{setModalVisible:q,modalVisible:fe,loadingCodeHelp:xe,handleSearch:ht,data:he,setConditionSeq:De,setSubConditionSql:Te,fetchCodehelpData1:ut,keyword:X,setKeyword:Pe,setDeptSeq:Ge,setDeptName:He,deptName:Se,setData1:K,setSelection:ot,selection:Kt,resetTable:be}),t.jsx(us,{setModalVisible:$e,modalVisible:Ue,loadingCodeHelp:xe,handleSearch:gt,data:ge,setConditionSeq:De,setSubConditionSql:Te,fetchCodehelpData2:mt,keyword:X,setKeyword:Pe,setEmpName:Ve,setEmpSeq:Ke,setSelection:lt,selection:Yt,resetTable:ct,empName:We}),t.jsx(fs,{setModalVisible:Le,modalVisible:Bt,loadingCodeHelp:xe,handleSearch:xt,data:At,setConditionSeq:De,setSubConditionSql:Te,fetchCodehelpData3:pt,keyword:X,setKeyword:Pe,setCustName:Qe,setCustSeq:Ye,resetTable:rt,setSelection:it,selection:Xt,custName:Xe}),t.jsx(yt,{modal2Open:Wt,setModal2Open:at,resetTable:be,error:"Đơn hàng đã được hoàn thành!",setKeyPath:z}),t.jsx(yt,{modal2Open:Vt,setModal2Open:st,resetTable:be,error:"Đơn hàng chưa được xác nhận!",setKeyPath:z})]})}export{Ts as default};
